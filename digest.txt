Directory structure:
└── myapplication/
    ├── build.gradle.kts
    ├── gradle.properties
    ├── gradlew
    ├── gradlew.bat
    ├── server_time_explicacion.html
    ├── settings.gradle.kts
    ├── app/
    │   ├── build.gradle.kts
    │   ├── google-services.json
    │   ├── proguard-rules.pro
    │   └── src/
    │       ├── androidTest/
    │       │   └── java/
    │       │       └── com/
    │       │           └── example/
    │       │               └── myapplication/
    │       │                   └── ExampleInstrumentedTest.kt
    │       ├── main/
    │       │   ├── AndroidManifest.xml
    │       │   ├── java/
    │       │   │   └── com/
    │       │   │       └── example/
    │       │   │           └── myapplication/
    │       │   │               ├── __MyIconPack.kt
    │       │   │               ├── App.kt
    │       │   │               ├── MainActivity.kt
    │       │   │               ├── di/
    │       │   │               │   └── modules.kt
    │       │   │               ├── features/
    │       │   │               │   ├── dollar/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── database/
    │       │   │               │   │   │   │   ├── dao/
    │       │   │               │   │   │   │   │   └── IDollarDao.kt
    │       │   │               │   │   │   │   └── entity/
    │       │   │               │   │   │   │       └── DollarEntity.kt
    │       │   │               │   │   │   ├── datasource/
    │       │   │               │   │   │   │   ├── DollarLocalDataSource.kt
    │       │   │               │   │   │   │   └── RealTimeRemoteDataSource.kt
    │       │   │               │   │   │   ├── mapper/
    │       │   │               │   │   │   │   └── mapper.kt
    │       │   │               │   │   │   └── repository/
    │       │   │               │   │   │       └── DollarRepository.kt
    │       │   │               │   │   ├── domain/
    │       │   │               │   │   │   ├── model/
    │       │   │               │   │   │   │   └── DollarModel.kt
    │       │   │               │   │   │   ├── repository/
    │       │   │               │   │   │   │   └── IDollarRepository.kt
    │       │   │               │   │   │   └── usecases/
    │       │   │               │   │   │       └── FetchDollarUseCase.kt
    │       │   │               │   │   └── presentation/
    │       │   │               │   │       ├── DollarCard.kt
    │       │   │               │   │       ├── DollarScreen.kt
    │       │   │               │   │       └── DollarViewModel.kt
    │       │   │               │   ├── github/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── api/
    │       │   │               │   │   │   │   ├── GithubService.kt
    │       │   │               │   │   │   │   └── dto/
    │       │   │               │   │   │   │       └── GithubDto.kt
    │       │   │               │   │   │   ├── datasourse/
    │       │   │               │   │   │   │   └── GithubRemoteDataSource.kt
    │       │   │               │   │   │   └── repository/
    │       │   │               │   │   │       └── GithubRepository.kt
    │       │   │               │   │   ├── domain/
    │       │   │               │   │   │   ├── model/
    │       │   │               │   │   │   │   ├── NickName.kt
    │       │   │               │   │   │   │   ├── UrlPath.kt
    │       │   │               │   │   │   │   └── UserModel.kt
    │       │   │               │   │   │   ├── repository/
    │       │   │               │   │   │   │   └── IgithubRepository.kt
    │       │   │               │   │   │   └── usercases/
    │       │   │               │   │   │       └── FindByNickNameUseCase.kt
    │       │   │               │   │   └── presentation/
    │       │   │               │   │       ├── GirhubViewModel.kt
    │       │   │               │   │       └── GithubScreen.kt
    │       │   │               │   ├── login/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   └── repository/
    │       │   │               │   │   │       └── LoginRepository.kt
    │       │   │               │   │   ├── domain/
    │       │   │               │   │   │   ├── model/
    │       │   │               │   │   │   │   ├── Email.kt
    │       │   │               │   │   │   │   ├── Password.kt
    │       │   │               │   │   │   │   └── UserLoginModel.kt
    │       │   │               │   │   │   ├── repository/
    │       │   │               │   │   │   │   └── ILoginRepository.kt
    │       │   │               │   │   │   └── usercases/
    │       │   │               │   │   │       └── LoginUseCase.kt
    │       │   │               │   │   └── presentation/
    │       │   │               │   │       ├── LogInPage.kt
    │       │   │               │   │       └── LogInViewModel.kt
    │       │   │               │   ├── logs/
    │       │   │               │   │   ├── LogScheduler.kt
    │       │   │               │   │   ├── LogUploadWorker.kt
    │       │   │               │   │   └── data/
    │       │   │               │   │       └── datasource/
    │       │   │               │   │           └── LogsRemoteDataSource.kt
    │       │   │               │   ├── maintenance/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── MaintenanceDataStore.kt
    │       │   │               │   │   │   └── MaintenanceRepository.kt
    │       │   │               │   │   └── presentation/
    │       │   │               │   │       ├── MaintenanceOverlay.kt
    │       │   │               │   │       └── MaintenanceViewModel.kt
    │       │   │               │   ├── movies/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── api/
    │       │   │               │   │   │   │   ├── MovieService.kt
    │       │   │               │   │   │   │   └── dto/
    │       │   │               │   │   │   │       ├── MovieDto.kt
    │       │   │               │   │   │   │       └── MoviePageDto.kt
    │       │   │               │   │   │   ├── database/
    │       │   │               │   │   │   │   ├── AppRoomDatabase.kt
    │       │   │               │   │   │   │   ├── dao/
    │       │   │               │   │   │   │   │   └── IMovieDao.kt
    │       │   │               │   │   │   │   └── entity/
    │       │   │               │   │   │   │       └── MovieEntity.kt
    │       │   │               │   │   │   ├── datasource/
    │       │   │               │   │   │   │   ├── MovieLocalDataSource.kt
    │       │   │               │   │   │   │   └── MovieRemoteDataSource.kt
    │       │   │               │   │   │   ├── mapper/
    │       │   │               │   │   │   │   └── mapper.kt
    │       │   │               │   │   │   └── repository/
    │       │   │               │   │   │       └── MovieRepository.kt
    │       │   │               │   │   ├── domain/
    │       │   │               │   │   │   ├── model/
    │       │   │               │   │   │   │   └── MovieModel.kt
    │       │   │               │   │   │   ├── repository/
    │       │   │               │   │   │   │   └── IMovieRepository.kt
    │       │   │               │   │   │   └── usercases/
    │       │   │               │   │   │       └── GetMoviesUseCase.kt
    │       │   │               │   │   └── presentation/
    │       │   │               │   │       ├── MovieDetailScreen.kt
    │       │   │               │   │       ├── MoviesScreen.kt
    │       │   │               │   │       └── MoviesViewModel.kt
    │       │   │               │   ├── notification/
    │       │   │               │   │   └── data/
    │       │   │               │   │       └── service/
    │       │   │               │   │           └── FirebaseService.kt
    │       │   │               │   ├── profile/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   └── repository/
    │       │   │               │   │   │       └── ProfileRepository.kt
    │       │   │               │   │   ├── domain/
    │       │   │               │   │   │   ├── model/
    │       │   │               │   │   │   │   ├── ProfileModel.kt
    │       │   │               │   │   │   │   └── vo/
    │       │   │               │   │   │   │       ├── Cellphone.kt
    │       │   │               │   │   │   │       ├── Summary.kt
    │       │   │               │   │   │   │       └── Username.kt
    │       │   │               │   │   │   ├── repository/
    │       │   │               │   │   │   │   └── IProfileRepository.kt
    │       │   │               │   │   │   └── usercases/
    │       │   │               │   │   │       └── GetProfileUseCase.kt
    │       │   │               │   │   └── presentation/
    │       │   │               │   │       ├── ProfileScreen.kt
    │       │   │               │   │       └── ProfileViewModel.kt
    │       │   │               │   ├── sessionDataStore/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   └── LoginDataStore.kt
    │       │   │               │   │   └── domain/
    │       │   │               │   │       ├── repository/
    │       │   │               │   │       │   └── ILoginDataStore.kt
    │       │   │               │   │       └── usecases/
    │       │   │               │   │           └── GetTokenUseCase.kt
    │       │   │               │   ├── time/
    │       │   │               │   │   ├── data/
    │       │   │               │   │   │   ├── datasource/
    │       │   │               │   │   │   │   ├── MockServerTimeDataSource.kt
    │       │   │               │   │   │   │   ├── PersistentMockServerTimeDataSource.kt
    │       │   │               │   │   │   │   └── ServerTimeDataSource.kt
    │       │   │               │   │   │   ├── local/
    │       │   │               │   │   │   │   └── ServerTimeLocalStore.kt
    │       │   │               │   │   │   └── repository/
    │       │   │               │   │   │       └── ServerTimeRepository.kt
    │       │   │               │   │   └── domain/
    │       │   │               │   │       ├── model/
    │       │   │               │   │       │   ├── ManualServerTimeConfig.kt
    │       │   │               │   │       │   └── ServerTime.kt
    │       │   │               │   │       ├── repository/
    │       │   │               │   │       │   └── ITimeRepository.kt
    │       │   │               │   │       └── usercases/
    │       │   │               │   │           └── GetServerTimeUseCase.kt
    │       │   │               │   └── webview/
    │       │   │               │       └── presentation/
    │       │   │               │           └── AtuladoScreen.kt
    │       │   │               ├── myiconpack/
    │       │   │               │   └── Accessibility.kt
    │       │   │               ├── navigation/
    │       │   │               │   ├── AppNavigation.kt
    │       │   │               │   ├── NavigationDrawer.kt
    │       │   │               │   ├── NavigationViewModel.kt
    │       │   │               │   └── Screen.kt
    │       │   │               └── ui/
    │       │   │                   └── theme/
    │       │   │                       ├── Color.kt
    │       │   │                       ├── Theme.kt
    │       │   │                       └── Type.kt
    │       │   ├── proto/
    │       │   │   └── LogApi.proto
    │       │   └── res/
    │       │       ├── drawable/
    │       │       │   ├── ic_launcher_background.xml
    │       │       │   └── ic_launcher_foreground.xml
    │       │       ├── mipmap-anydpi-v26/
    │       │       │   ├── ic_launcher.xml
    │       │       │   └── ic_launcher_round.xml
    │       │       ├── mipmap-hdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   ├── ic_launcher_foreground.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-mdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   ├── ic_launcher_foreground.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-xhdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   ├── ic_launcher_foreground.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-xxhdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   ├── ic_launcher_foreground.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── mipmap-xxxhdpi/
    │       │       │   ├── ic_launcher.webp
    │       │       │   ├── ic_launcher_foreground.webp
    │       │       │   └── ic_launcher_round.webp
    │       │       ├── values/
    │       │       │   ├── colors.xml
    │       │       │   ├── strings.xml
    │       │       │   └── themes.xml
    │       │       └── xml/
    │       │           ├── backup_rules.xml
    │       │           ├── data_extraction_rules.xml
    │       │           └── remote_config_defaults.xml
    │       └── test/
    │           └── java/
    │               └── com/
    │                   └── example/
    │                       └── myapplication/
    │                           ├── ExampleUnitTest.kt
    │                           └── features/
    │                               ├── github/
    │                               │   └── domain/
    │                               │       ├── model/
    │                               │       │   └── UrlPathTest.kt
    │                               │       └── usercases/
    │                               │           └── FindByNicknameUseCaseTest.kt
    │                               ├── login/
    │                               │   └── domain/
    │                               │       └── model/
    │                               │           ├── EmailParametirizedTest.kt
    │                               │           └── EmailTest.kt
    │                               ├── movies/
    │                               │   └── data/
    │                               │       └── database/
    │                               │           └── MigrationTest.kt
    │                               └── profile/
    │                                   └── domain/
    │                                       └── model/
    │                                           └── EmailProfileTest.kt
    └── gradle/
        ├── libs.versions.toml
        └── wrapper/
            └── gradle-wrapper.properties

================================================
FILE: build.gradle.kts
================================================
// Top-level build file where you can add configuration options common to all sub-projects/modules.
plugins {
    alias(libs.plugins.android.application) apply false
    alias(libs.plugins.kotlin.android) apply false
    alias(libs.plugins.kotlin.compose) apply false
    alias(libs.plugins.google.gms.google.services) apply false
    alias(libs.plugins.ksp) apply false
    alias(libs.plugins.kotlinSerialization) apply false
}


================================================
FILE: gradle.properties
================================================
# Project-wide Gradle settings.
# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.
# For more details on how to configure your build environment visit
# http://www.gradle.org/docs/current/userguide/build_environment.html
# Specifies the JVM arguments used for the daemon process.
# The setting is particularly useful for tweaking memory settings.
org.gradle.jvmargs=-Xmx2048m -Dfile.encoding=UTF-8
# When configured, Gradle will run in incubating parallel mode.
# This option should only be used with decoupled projects. For more details, visit
# https://developer.android.com/r/tools/gradle-multi-project-decoupled-projects
# org.gradle.parallel=true
# AndroidX package structure to make it clearer which packages are bundled with the
# Android operating system, and which are packaged with your app's APK
# https://developer.android.com/topic/libraries/support-library/androidx-rn
android.useAndroidX=true
# Kotlin code style for this project: "official" or "obsolete":
kotlin.code.style=official
# Enables namespacing of each library's R class so that its R class includes only the
# resources declared in the library itself and none from the library's dependencies,
# thereby reducing the size of the R class for that library
android.nonTransitiveRClass=true


================================================
FILE: gradlew
================================================
#!/usr/bin/env sh

#
# Copyright 2015 the original author or authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

##############################################################################
##
##  Gradle start up script for UN*X
##
##############################################################################

# Attempt to set APP_HOME
# Resolve links: $0 may be a link
PRG="$0"
# Need this for relative symlinks.
while [ -h "$PRG" ] ; do
    ls=`ls -ld "$PRG"`
    link=`expr "$ls" : '.*-> \(.*\)$'`
    if expr "$link" : '/.*' > /dev/null; then
        PRG="$link"
    else
        PRG=`dirname "$PRG"`"/$link"
    fi
done
SAVED="`pwd`"
cd "`dirname \"$PRG\"`/" >/dev/null
APP_HOME="`pwd -P`"
cd "$SAVED" >/dev/null

APP_NAME="Gradle"
APP_BASE_NAME=`basename "$0"`

# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD="maximum"

warn () {
    echo "$*"
}

die () {
    echo
    echo "$*"
    echo
    exit 1
}

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
nonstop=false
case "`uname`" in
  CYGWIN* )
    cygwin=true
    ;;
  Darwin* )
    darwin=true
    ;;
  MINGW* )
    msys=true
    ;;
  NONSTOP* )
    nonstop=true
    ;;
esac

CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar


# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD="$JAVA_HOME/jre/sh/java"
    else
        JAVACMD="$JAVA_HOME/bin/java"
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD="java"
    which java >/dev/null 2>&1 || die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
fi

# Increase the maximum file descriptors if we can.
if [ "$cygwin" = "false" -a "$darwin" = "false" -a "$nonstop" = "false" ] ; then
    MAX_FD_LIMIT=`ulimit -H -n`
    if [ $? -eq 0 ] ; then
        if [ "$MAX_FD" = "maximum" -o "$MAX_FD" = "max" ] ; then
            MAX_FD="$MAX_FD_LIMIT"
        fi
        ulimit -n $MAX_FD
        if [ $? -ne 0 ] ; then
            warn "Could not set maximum file descriptor limit: $MAX_FD"
        fi
    else
        warn "Could not query maximum file descriptor limit: $MAX_FD_LIMIT"
    fi
fi

# For Darwin, add options to specify how the application appears in the dock
if $darwin; then
    GRADLE_OPTS="$GRADLE_OPTS \"-Xdock:name=$APP_NAME\" \"-Xdock:icon=$APP_HOME/media/gradle.icns\""
fi

# For Cygwin or MSYS, switch paths to Windows format before running java
if [ "$cygwin" = "true" -o "$msys" = "true" ] ; then
    APP_HOME=`cygpath --path --mixed "$APP_HOME"`
    CLASSPATH=`cygpath --path --mixed "$CLASSPATH"`

    JAVACMD=`cygpath --unix "$JAVACMD"`

    # We build the pattern for arguments to be converted via cygpath
    ROOTDIRSRAW=`find -L / -maxdepth 1 -mindepth 1 -type d 2>/dev/null`
    SEP=""
    for dir in $ROOTDIRSRAW ; do
        ROOTDIRS="$ROOTDIRS$SEP$dir"
        SEP="|"
    done
    OURCYGPATTERN="(^($ROOTDIRS))"
    # Add a user-defined pattern to the cygpath arguments
    if [ "$GRADLE_CYGPATTERN" != "" ] ; then
        OURCYGPATTERN="$OURCYGPATTERN|($GRADLE_CYGPATTERN)"
    fi
    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    i=0
    for arg in "$@" ; do
        CHECK=`echo "$arg"|egrep -c "$OURCYGPATTERN" -`
        CHECK2=`echo "$arg"|egrep -c "^-"`                                 ### Determine if an option

        if [ $CHECK -ne 0 ] && [ $CHECK2 -eq 0 ] ; then                    ### Added a condition
            eval `echo args$i`=`cygpath --path --ignore --mixed "$arg"`
        else
            eval `echo args$i`="\"$arg\""
        fi
        i=`expr $i + 1`
    done
    case $i in
        0) set -- ;;
        1) set -- "$args0" ;;
        2) set -- "$args0" "$args1" ;;
        3) set -- "$args0" "$args1" "$args2" ;;
        4) set -- "$args0" "$args1" "$args2" "$args3" ;;
        5) set -- "$args0" "$args1" "$args2" "$args3" "$args4" ;;
        6) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" ;;
        7) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" ;;
        8) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" ;;
        9) set -- "$args0" "$args1" "$args2" "$args3" "$args4" "$args5" "$args6" "$args7" "$args8" ;;
    esac
fi

# Escape application args
save () {
    for i do printf %s\\n "$i" | sed "s/'/'\\\\''/g;1s/^/'/;\$s/\$/' \\\\/" ; done
    echo " "
}
APP_ARGS=`save "$@"`

# Collect all arguments for the java command, following the shell quoting and substitution rules
eval set -- $DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS "\"-Dorg.gradle.appname=$APP_BASE_NAME\"" -classpath "\"$CLASSPATH\"" org.gradle.wrapper.GradleWrapperMain "$APP_ARGS"

exec "$JAVACMD" "$@"



================================================
FILE: gradlew.bat
================================================
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem

@if "%DEBUG%" == "" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%" == "" set DIRNAME=.
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if "%ERRORLEVEL%" == "0" goto execute

echo.
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo.
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%
echo.
echo Please set the JAVA_HOME variable in your environment to match the
echo location of your Java installation.

goto fail

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*

:end
@rem End local scope for the variables with windows NT shell
if "%ERRORLEVEL%"=="0" goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
if  not "" == "%GRADLE_EXIT_CONSOLE%" exit 1
exit /b 1

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega



================================================
FILE: server_time_explicacion.html
================================================
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Hora del servidor (mock) - Flujo</title>
  <style>
    :root {
      --bg: #0d1117;
      --card: #161b22;
      --text: #e6edf3;
      --muted: #8b949e;
      --accent: #58a6ff;
      --success: #3fb950;
      --warning: #f2cc60;
      --error: #ff7b72;
      --border: #30363d;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at 15% 20%, #0f172a 0, #0d1117 40%), radial-gradient(circle at 85% 10%, #0a1f38 0, #0d1117 40%), radial-gradient(circle at 50% 80%, #132042 0, #0d1117 50%);
      color: var(--text);
      padding: 40px 18px 64px;
      display: flex;
      justify-content: center;
    }
    main {
      width: min(960px, 100%);
    }
    h1, h2, h3 {
      margin: 0 0 12px;
      letter-spacing: 0.2px;
    }
    h1 { font-size: 28px; }
    h2 { font-size: 20px; margin-top: 32px; }
    p { margin: 0 0 12px; color: var(--muted); line-height: 1.6; }
    .card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 18px 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.35);
      margin-top: 14px;
    }
    .flow {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 14px;
      margin-top: 12px;
    }
    .pill {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(88,166,255,0.08);
      border: 1px solid rgba(88,166,255,0.3);
      color: var(--text);
      font-size: 13px;
      margin-bottom: 10px;
    }
    code {
      background: rgba(255,255,255,0.04);
      border: 1px solid var(--border);
      padding: 2px 6px;
      border-radius: 6px;
      font-size: 13px;
      color: #c9d1d9;
    }
    ul { padding-left: 18px; color: var(--muted); }
    .status { display: flex; gap: 8px; align-items: center; margin-top: 8px; }
    .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 0 8px rgba(88,166,255,0.08); }
  </style>
</head>
<body>
  <main>
    <h1>Hora real (mock de backend)</h1>
    <p>La hora se fija en cÃ³digo, se hace avanzar con <code>SystemClock.elapsedRealtime()</code> (no depende de la hora del sistema) y se persiste el avance para sobrevivir reinicios sin internet.</p>

    <section class="card">
      <div class="pill">Como se calcula</div>
      <ul>
        <li>La hora "real" se fija en <code>ManualServerTimeConfig.FIXED_SERVER_EPOCH_MILLIS</code> (ejemplo: <code>1735689600000L</code> para 2024-12-31T00:00:00Z).</li>
        <li>Primer acceso: se guarda en DataStore la referencia <code>{epoch=fixed, elapsed=SystemClock.elapsedRealtime(), wallclock=System.currentTimeMillis()}</code>.</li>
        <li>Mismo boot: <code>delta = elapsedRealtimeNow - elapsedGuardado</code> y se devuelve <code>epochGuardado + delta</code> (ignora la hora del sistema).</li>
        <li>Nuevo boot: si <code>elapsedRealtime</code> es menor, se estima con <code>delta = max(0, wallclockNow - wallclockGuardado)</code> para avanzar el tiempo offline sin internet.</li>
        <li>Al final, se persiste <code>{epoch=horaCalculada, elapsed=elapsedRealtimeNow, wallclock=System.currentTimeMillis()}</code> para el siguiente ciclo.</li>
      </ul>
    </section>

    <section class="card">
      <div class="pill">Cadena de llamadas en la app</div>
      <div class="flow">
        <div>
          <h3>UI (Profile)</h3>
          <p>BotÃ³n "Mostrar hora del servidor" en <code>ProfileScreen</code> llama <code>fetchServerTime()</code> en el ViewModel.</p>
        </div>
        <div>
          <h3>ViewModel</h3>
          <p><code>ProfileViewModel.fetchServerTime()</code> â†’ Loading â†’ <code>GetServerTimeUseCase</code> â†’ Success/Error.</p>
        </div>
        <div>
          <h3>Use case</h3>
          <p><code>GetServerTimeUseCase.invoke()</code> pide al repositorio la hora actual.</p>
        </div>
        <div>
          <h3>Repositorio</h3>
          <p><code>ServerTimeRepository.getCurrentTime()</code> llama al datasource y envuelve en <code>Result</code>.</p>
        </div>
        <div>
          <h3>Datasource</h3>
          <p><code>PersistentMockServerTimeDataSource.fetchCurrentEpochMillis()</code> usa la hora fija + <code>elapsedRealtime</code> y persiste la referencia en DataStore.</p>
        </div>
      </div>
      <div class="status">
        <div class="dot"></div>
        <p>El valor formateado se muestra como "Hora real: HH:mm:ss".</p>
      </div>
    </section>

    <section class="card">
      <div class="pill">Configurar hora mock</div>
      <ul>
        <li>Edita <code>ManualServerTimeConfig.FIXED_SERVER_EPOCH_MILLIS</code> con el epoch (ms) que quieras simular.</li>
        <li>Ejemplo rÃ¡pido: "hoy a las 10:00 am" (segÃºn la fecha local actual) â†’ <code>1764252000000L</code>.</li>
        <li>Si necesitas otra fecha/hora, calcula su epoch en ms y actualiza el valor; la app mantendrÃ¡ el avance estable y lo recuperarÃ¡ tras reiniciar.</li>
      </ul>
    </section>

    <section class="card">
      <div class="pill">Archivos clave</div>
      <ul>
        <li><code>app/src/main/java/com/example/myapplication/features/time/domain/model/ManualServerTimeConfig.kt</code> (hora fija que simula el backend)</li>
        <li><code>app/src/main/java/com/example/myapplication/features/time/data/datasource/PersistentMockServerTimeDataSource.kt</code></li>
        <li><code>app/src/main/java/com/example/myapplication/features/time/data/local/ServerTimeLocalStore.kt</code></li>
        <li><code>app/src/main/java/com/example/myapplication/features/time/data/repository/ServerTimeRepository.kt</code></li>
        <li><code>app/src/main/java/com/example/myapplication/features/time/domain/usercases/GetServerTimeUseCase.kt</code></li>
        <li><code>app/src/main/java/com/example/myapplication/features/profile/presentation/ProfileViewModel.kt</code> (estado y acciÃ³n)</li>
        <li><code>app/src/main/java/com/example/myapplication/features/profile/presentation/ProfileScreen.kt</code> (botÃ³n y render)</li>
        <li><code>app/src/main/java/com/example/myapplication/di/modules.kt</code> (bindings Koin)</li>
      </ul>
    </section>
  </main>
</body>
</html>



================================================
FILE: settings.gradle.kts
================================================
pluginManagement {
    repositories {
        google {
            content {
                includeGroupByRegex("com\\.android.*")
                includeGroupByRegex("com\\.google.*")
                includeGroupByRegex("androidx.*")
            }
        }
        mavenCentral()
        gradlePluginPortal()
    }
}
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.name = "My Application"
include(":app")



================================================
FILE: app/build.gradle.kts
================================================
import com.google.protobuf.gradle.id
plugins {
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
    alias(libs.plugins.kotlin.compose)
    alias(libs.plugins.google.gms.google.services)
    alias(libs.plugins.ksp)
    alias(libs.plugins.kotlinSerialization)
    alias(libs.plugins.google.protobuf)
}

android {
    namespace = "com.example.myapplication"
    compileSdk = 36

    defaultConfig {
        applicationId = "com.example.myapplication"
        minSdk = 24
        targetSdk = 36
        versionCode = 1
        versionName = "1.0"

        testInstrumentationRunner = "androidx.test.runner.AndroidJUnitRunner"
    }

    buildTypes {
        release {
            isMinifyEnabled = false
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
        }
    }
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }
    kotlinOptions {
        jvmTarget = "11"
    }
    buildFeatures {
        compose = true
    }
}

dependencies {

    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.lifecycle.runtime.ktx)
    implementation(libs.androidx.activity.compose)
    implementation(platform(libs.androidx.compose.bom))
    implementation(libs.androidx.ui)
    implementation(libs.androidx.ui.graphics)
    implementation(libs.androidx.ui.tooling.preview)
    implementation(libs.androidx.material3)
    implementation(libs.glide)
    implementation(libs.retrofit)
    implementation(libs.coil.compose)
    implementation(libs.coil.network)
    implementation(libs.koin.android)
    implementation (libs.koin.androidx.navigation)
    implementation (libs.koin.androidx.compose)
    implementation(libs.androidx.navigation.compose)
    implementation(libs.converter.gson)
    implementation(libs.firebase.database)
    implementation(libs.firebase.messaging)
    implementation(libs.firebase.remoteconfig)
    implementation(libs.datastore)
    implementation(libs.androidx.core.splashscreen)
    implementation(libs.androidx.work.runtime.ktx)

    //proto
    implementation(libs.grpc.protobuf.lite)
    implementation(libs.protobuf.kotlin.lite)
    implementation(libs.grpc.kotlin.stub)
    runtimeOnly(libs.grpc.okhttp)

    //local bundle room
    implementation(libs.bundles.local)
    implementation(libs.androidx.junit.ktx)
    annotationProcessor(libs.room.compiler)
    ksp(libs.room.compiler)
    testImplementation(libs.room.testing)

    testImplementation(libs.junit)
    testImplementation(libs.mockk)
    testImplementation(libs.kotlinx.coroutines.test)
    androidTestImplementation(libs.androidx.junit)
    androidTestImplementation(libs.androidx.espresso.core)
    androidTestImplementation(platform(libs.androidx.compose.bom))
    androidTestImplementation(libs.androidx.ui.test.junit4)
    androidTestImplementation(libs.room.testing)
    androidTestImplementation(libs.androidx.core.testing)
    androidTestImplementation(libs.androidx.runner)
    androidTestImplementation(libs.androidx.rules)
    debugImplementation(libs.androidx.ui.tooling)
    debugImplementation(libs.androidx.ui.test.manifest)
    implementation(libs.kotlinx.serialization.json)
}

protobuf {
    protoc {
        artifact = "com.google.protobuf:protoc:${libs.versions.protobuf.get()}"
    }
    plugins {
        id("java") {
            artifact = libs.protoc.gen.grpc.java.get().toString()
        }
        id("grpc") {
            artifact = "io.grpc:protoc-gen-grpc-java:${libs.versions.grpc.get()}"
        }
        id("grpckt") {
            artifact = "io.grpc:protoc-gen-grpc-kotlin:${libs.versions.grpcKotlin.get()}:jdk8@jar"
        }
    }
    generateProtoTasks {
        all().forEach {
            it.plugins {
                create("java") { option("lite") }
                create("grpc") { option("lite") }
                create("grpckt") { option("lite") }
            }
            it.builtins {
                create("kotlin") { option("lite") }
            }
        }
    }
}



================================================
FILE: app/google-services.json
================================================
{
  "project_info": {
    "project_number": "467570912555",
    "project_id": "my-application-dfdfa",
    "storage_bucket": "my-application-dfdfa.firebasestorage.app"
  },
  "client": [
    {
      "client_info": {
        "mobilesdk_app_id": "1:467570912555:android:1c33b846051167638e696e",
        "android_client_info": {
          "package_name": "com.example.myapplication"
        }
      },
      "oauth_client": [],
      "api_key": [
        {
          "current_key": "AIzaSyBdjBEksV9K_dpJfnOcD8B3hBRpVmwJLR4"
        }
      ],
      "services": {
        "appinvite_service": {
          "other_platform_oauth_client": []
        }
      }
    }
  ],
  "configuration_version": "1"
}


================================================
FILE: app/proguard-rules.pro
================================================
# Add project specific ProGuard rules here.
# You can control the set of applied configuration files using the
# proguardFiles setting in build.gradle.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#}

# Uncomment this to preserve the line number information for
# debugging stack traces.
#-keepattributes SourceFile,LineNumberTable

# If you keep the line number information, uncomment this to
# hide the original source file name.
#-renamesourcefileattribute SourceFile


================================================
FILE: app/src/androidTest/java/com/example/myapplication/ExampleInstrumentedTest.kt
================================================
package com.example.myapplication

import androidx.test.platform.app.InstrumentationRegistry
import androidx.test.ext.junit.runners.AndroidJUnit4

import org.junit.Test
import org.junit.runner.RunWith

import org.junit.Assert.*

/**
 * Instrumented test, which will execute on an Android device.
 *
 * See [testing documentation](http://d.android.com/tools/testing).
 */
@RunWith(AndroidJUnit4::class)
class ExampleInstrumentedTest {
    @Test
    fun useAppContext() {
        // Context of the app under test.
        val appContext = InstrumentationRegistry.getInstrumentation().targetContext
        assertEquals("com.example.myapplication", appContext.packageName)
    }
}


================================================
FILE: app/src/main/AndroidManifest.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:name=".App"
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.MyApplication">

        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:label="@string/app_name"
            android:theme="@style/Theme.App.Starting">  <!-- Cambia esto -->
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <service
            android:name=".features.notification.data.service.FirebaseService"
            android:exported="false">
            <intent-filter>
                <action android:name="com.google.firebase.MESSAGING_EVENT" />
            </intent-filter>
        </service>
    </application>
</manifest>


================================================
FILE: app/src/main/java/com/example/myapplication/__MyIconPack.kt
================================================
package com.example.myapplication

import androidx.compose.ui.graphics.vector.ImageVector
import com.example.myapplication.myiconpack.Accessibility
import kotlin.collections.List as ____KtList

public object MyIconPack

private var __AllIcons: ____KtList<ImageVector>? = null

public val MyIconPack.AllIcons: ____KtList<ImageVector>
  get() {
    if (__AllIcons != null) {
      return __AllIcons!!
    }
    __AllIcons= listOf(Accessibility)
    return __AllIcons!!
  }



================================================
FILE: app/src/main/java/com/example/myapplication/App.kt
================================================
package com.example.myapplication

import android.app.Application
import com.example.myapplication.di.appModule
import org.koin.android.ext.koin.androidContext
import org.koin.core.context.GlobalContext

class App: Application() {
    override fun onCreate(){
        super.onCreate()
        GlobalContext.startKoin {
            androidContext(this@App)
            modules(appModule)
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/MainActivity.kt
================================================
package com.example.myapplication

import android.content.Intent
import android.os.Bundle
import android.util.Log
import androidx.activity.ComponentActivity
import androidx.activity.compose.setContent
import androidx.activity.enableEdgeToEdge
import androidx.activity.viewModels
import androidx.compose.foundation.Image
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.statusBarsPadding
import androidx.compose.foundation.layout.width
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Menu
import androidx.compose.material3.CenterAlignedTopAppBar
import androidx.compose.material3.DrawerState
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.ModalDrawerSheet
import androidx.compose.material3.ModalNavigationDrawer
import androidx.compose.material3.NavigationDrawerItem
import androidx.compose.material3.Scaffold
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBarDefaults
import androidx.compose.material3.rememberDrawerState
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.collectAsState
import androidx.compose.runtime.getValue
import androidx.compose.runtime.rememberCoroutineScope
import androidx.compose.runtime.snapshotFlow
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.res.painterResource
import androidx.compose.ui.res.stringResource
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import androidx.core.splashscreen.SplashScreen.Companion.installSplashScreen
import androidx.lifecycle.lifecycleScope
import androidx.navigation.NavHostController
import androidx.navigation.compose.currentBackStackEntryAsState
import androidx.navigation.compose.rememberNavController
import com.example.myapplication.features.maintenance.presentation.MaintenanceOverlay
import com.example.myapplication.features.maintenance.presentation.MaintenanceViewModel
import com.example.myapplication.navigation.AppNavigation
import com.example.myapplication.navigation.NavigationDrawer
import com.example.myapplication.navigation.NavigationViewModel
import com.example.myapplication.navigation.Screen
import com.example.myapplication.ui.theme.MyApplicationTheme
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.collect
import kotlinx.coroutines.flow.distinctUntilChanged
import kotlinx.coroutines.launch
import org.koin.androidx.compose.koinViewModel

class MainActivity : ComponentActivity() {
    private val navigationViewModel: NavigationViewModel by viewModels()
    private var currentIntent: Intent? = null
    private var keepSplashOnScreen = true

    override fun onCreate(savedInstanceState: Bundle?) {

        //splashscreen
        val splashScreen = installSplashScreen()

        super.onCreate(savedInstanceState)
        currentIntent = intent

        splashScreen.setKeepOnScreenCondition {
            keepSplashOnScreen
        }

        lifecycleScope.launch {
            delay(4000)
            keepSplashOnScreen = false
        }

        enableEdgeToEdge()
        setContent {
            LaunchedEffect(Unit) {
                Log.d("MainActivity", "OnCreate - Procesando intent inicial")
                navigationViewModel.handleDeepLink(currentIntent)
            }

            LaunchedEffect(Unit) {
                snapshotFlow { currentIntent }
                    .distinctUntilChanged()
                    .collect{intent ->
                        Log.d("MainActivity", "Nuevo intent recibido: ${intent?.action}")
                        navigationViewModel.handleDeepLink(intent)
                    }
            }

            MainApp(navigationViewModel)
            //MyApplicationTheme {
                //Scaffold(modifier = Modifier.fillMaxSize()) { innerPadding ->
                    //GithubScreen(modifier = Modifier.padding(innerPadding))
               //     SignInPage()
             //   }
            //}
        }
    }
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun NavigationDrawerHost(
    coroutineScope: CoroutineScope,
    drawerState: DrawerState,
    navigationViewModel: NavigationViewModel,
    navController : NavHostController
) {
    Scaffold(
        topBar = {
            CenterAlignedTopAppBar(
                title = { Text(stringResource(R.string.app_name)) },
                modifier = Modifier.statusBarsPadding(),
                colors = TopAppBarDefaults.centerAlignedTopAppBarColors(
                    containerColor = MaterialTheme.colorScheme.surfaceContainer
                ),
                navigationIcon = {
                    IconButton(onClick = {
                        coroutineScope.launch {
                            drawerState.open()
                        }
                    }) {
                        Icon(
                            Icons.Default.Menu,
                            contentDescription = "Menu")
                    }
                }
            )
        }
    ) {
        innnerPadding -> AppNavigation(
        navController = navController,
        navigationViewModel = navigationViewModel,
        modifier = Modifier.padding(innnerPadding))
    }
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun MainApp( navigationViewModel: NavigationViewModel) {
    val maintenanceViewModel: MaintenanceViewModel = koinViewModel()
    val maintenanceMode by maintenanceViewModel.maintenanceMode.collectAsState()
    val navController: NavHostController = rememberNavController()
    val navBackStackEntry by navController.currentBackStackEntryAsState()
    val currentDestination = navBackStackEntry?.destination
    val notShowTopBar =
        (currentDestination?.route?.startsWith(Screen.MovieDetail.route) == true) ||
                (currentDestination?.route?.startsWith(Screen.Atulado.route) == true)

    LaunchedEffect(maintenanceMode) {
        Log.d("MainApp", "Maintenance mode cambiÃ³ a: $maintenanceMode")
    }

    if(maintenanceMode){
        MaintenanceOverlay()
    }else{
        val navController: NavHostController = rememberNavController()
        val navBackStackEntry by navController.currentBackStackEntryAsState()
        val currentDestination = navBackStackEntry?.destination
        val navigationDrawerItems = listOf(
            NavigationDrawer.Profile,
            NavigationDrawer.Dollar,
            NavigationDrawer.Movie,
            NavigationDrawer.Github
        )
        val drawerState =
            rememberDrawerState(initialValue =
                androidx.compose.material3.DrawerValue.Closed)
        val coroutineScope = rememberCoroutineScope()
        val isMovieDetail = currentDestination?.route?.startsWith(Screen.MovieDetail.route) == true
        if (isMovieDetail) {
            AppNavigation(
                navController = navController,
                navigationViewModel = navigationViewModel,
                modifier = Modifier
            )
        }else{
            ModalNavigationDrawer(
                drawerState = drawerState,
                drawerContent = {
                    ModalDrawerSheet(
                        modifier = Modifier.width(256.dp)
                    ) {
                        Box(
                            modifier = Modifier.width(256.dp),
                            contentAlignment = Alignment.Center
                        ) {
                            Image(
                                modifier = Modifier.width(120.dp),
                                painter = painterResource(id =
                                    R.drawable.ic_launcher_background),
                                contentDescription = "Logo",
                            )
                            Image(
                                painter = painterResource(id =
                                    R.drawable.ic_launcher_foreground),
                                contentDescription = "Logo",
                                modifier = Modifier.padding(16.dp)
                            )
                        }
                        navigationDrawerItems.forEach { item ->
                            val isSelected = currentDestination?.route == item.route
                            NavigationDrawerItem(
                                icon = {
                                    Icon(
                                        imageVector = if (isSelected) item.
                                        selectedIcon else item.unselectedIcon,
                                        contentDescription = item.label
                                    )
                                },
                                label = { Text(item.label) },
                                selected = isSelected,
                                onClick = {
                                    navController.navigate(item.route) {
                                        launchSingleTop = true
                                        restoreState = true
                                        popUpTo(
                                            navController.graph.startDestinationId) {
                                            saveState = true
                                        }
                                    }
                                    coroutineScope.launch {
                                        drawerState.close()
                                    }
                                }
                            )
                        }
                    }
                }
            ) {
                NavigationDrawerHost(coroutineScope, drawerState, navigationViewModel, navController)
            }
        }
    }
}

@Composable
fun Greeting(name: String, modifier: Modifier = Modifier) {
    Text(
        text = "Hello $name!",
        modifier = modifier
    )
}

@Preview(showBackground = true)
@Composable
fun GreetingPreview() {
    MyApplicationTheme {
        Greeting("Android")
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/di/modules.kt
================================================
package com.example.myapplication.di

import com.example.myapplication.features.dollar.data.database.dao.IDollarDao
import com.example.myapplication.features.dollar.data.datasource.DollarLocalDataSource
import com.example.myapplication.features.dollar.data.datasource.RealTimeRemoteDataSource
import com.example.myapplication.features.dollar.data.repository.DollarRepository
import com.example.myapplication.features.dollar.domain.repository.IDollarRepository
import com.example.myapplication.features.dollar.domain.usecases.FetchDollarUseCase
import com.example.myapplication.features.dollar.presentation.DollarViewModel
import com.example.myapplication.features.github.data.api.GithubService
import com.example.myapplication.features.github.data.datasourse.GithubRemoteDataSource
import com.example.myapplication.features.github.data.repository.GithubRepository
import com.example.myapplication.features.github.domain.repository.IgithubRepository
import com.example.myapplication.features.github.domain.usercases.FindByNickNameUseCase
import com.example.myapplication.features.github.presentation.GirhubViewModel
import com.example.myapplication.features.login.data.repository.LoginRepository
import com.example.myapplication.features.login.domain.repository.ILoginRepository
import com.example.myapplication.features.login.domain.usercases.LoginUseCase
import com.example.myapplication.features.login.presentation.LogInViewModel
import com.example.myapplication.features.maintenance.data.MaintenanceDataStore
import com.example.myapplication.features.maintenance.data.MaintenanceRepository
import com.example.myapplication.features.maintenance.presentation.MaintenanceViewModel
import com.example.myapplication.features.movies.data.api.MovieService
import com.example.myapplication.features.movies.data.database.AppRoomDatabase
import com.example.myapplication.features.movies.data.database.dao.IMovieDao
//import com.example.myapplication.features.movies.data.database.AppRoomDatabaseMovies
import com.example.myapplication.features.movies.data.datasource.MovieLocalDataSource
import com.example.myapplication.features.movies.data.datasource.MovieRemoteDataSource
import com.example.myapplication.features.movies.data.repository.MovieRepository
import com.example.myapplication.features.movies.domain.repository.IMovieRepository
import com.example.myapplication.features.movies.domain.usercases.GetMoviesUseCase
import com.example.myapplication.features.movies.presentation.MoviesViewModel
import com.example.myapplication.features.profile.data.repository.ProfileRepository
import com.example.myapplication.features.profile.domain.repository.IProfileRepository
import com.example.myapplication.features.profile.domain.usercases.GetProfileUseCase
import com.example.myapplication.features.profile.presentation.ProfileViewModel
import com.example.myapplication.features.time.data.datasource.PersistentMockServerTimeDataSource
import com.example.myapplication.features.time.data.datasource.ServerTimeDataSource
import com.example.myapplication.features.time.data.local.ServerTimeLocalStore
import com.example.myapplication.features.time.data.repository.ServerTimeRepository
import com.example.myapplication.features.time.domain.model.ManualServerTimeConfig
import com.example.myapplication.features.time.domain.repository.ITimeRepository
import com.example.myapplication.features.time.domain.usercases.GetServerTimeUseCase
import com.google.firebase.remoteconfig.FirebaseRemoteConfig
import okhttp3.OkHttpClient
import org.koin.android.ext.koin.androidContext
import org.koin.androidx.viewmodel.dsl.viewModel
import org.koin.core.qualifier.named
import org.koin.dsl.module
import retrofit2.Retrofit
import retrofit2.converter.gson.GsonConverterFactory
import java.util.concurrent.TimeUnit

val appModule = module() {
    // OkHttpClient
    single {
        OkHttpClient.Builder()
            .connectTimeout(30, TimeUnit.SECONDS)
            .readTimeout(30, TimeUnit.SECONDS)
            .writeTimeout(30, TimeUnit.SECONDS)
            .build()
    }

    // Retrofit
    single(named("github")) {
        Retrofit.Builder()
            .baseUrl("https://api.github.com/")
            .client(get())
            .addConverterFactory(GsonConverterFactory.create())
            .build()
    }

    single(named("movies")){
        Retrofit.Builder()
            .baseUrl("https://api.themoviedb.org/3/")
            .client(get())
            .addConverterFactory(GsonConverterFactory.create())
            .build()
    }

    // GithubService
    single<GithubService> {
        get<Retrofit>(named("github")).create(GithubService::class.java)
    }
    single{ GithubRemoteDataSource(get()) }
    single< IgithubRepository>{ GithubRepository(get()) }

    factory { FindByNickNameUseCase(get()) }
    viewModel { GirhubViewModel(get()) }


    // Profile
    single<IProfileRepository> { ProfileRepository() }
    factory { GetProfileUseCase(get()) }
    single { ServerTimeLocalStore(androidContext()) }
    single<ServerTimeDataSource> {
        PersistentMockServerTimeDataSource(
            localStore = get(),
            manualSeedEpochMillis = ManualServerTimeConfig.FIXED_SERVER_EPOCH_MILLIS
        )
    }
    single<ITimeRepository> { ServerTimeRepository(get()) }
    factory { GetServerTimeUseCase(get()) }
    viewModel { ProfileViewModel(get(), get()) }


    //Login
    viewModel{ LogInViewModel(get()) }
    factory { LoginUseCase(get()) }
    single<ILoginRepository> { LoginRepository() }


    //Movies
    //single { AppRoomDatabaseMovies.getDatabase(get()) }
    //single { get<AppRoomDatabaseMovies>().movieDao() }
    single<IMovieDao>{ get<AppRoomDatabase>().movieDao() }
    single<MovieService> {
        get<Retrofit>(named("movies")).create(MovieService::class.java)
    }
    single { MovieLocalDataSource(get()) }
    single { MovieRemoteDataSource(get(), get()) }
    single<IMovieRepository> { MovieRepository(get(), get()) }
    single<MovieRepository>{ MovieRepository(get(),get()) }
    factory { GetMoviesUseCase(get()) }
    viewModel { MoviesViewModel(get(), get()) }


    //RoomDatabase
    //single { AppRoomDatabaseA.getDatabase(get()) }
    //single { get<AppRoomDatabaseA>().dollarDao() }
    single { AppRoomDatabase.getDatabase(get()) }


    //Dollar
    single<IDollarDao> { get<AppRoomDatabase>().dollarDao() }
    single{
        RealTimeRemoteDataSource()
    }
    single { DollarLocalDataSource(get()) }
    single<IDollarRepository> { DollarRepository(get(), get()) }
    single<DollarRepository>{ DollarRepository(get(), get()) }
    factory { FetchDollarUseCase(get()) }
    viewModel{ DollarViewModel(get(), get()) }

    // Maintenance
    single { MaintenanceDataStore(get()) }
    single {
        FirebaseRemoteConfig.getInstance()
    }
    single { MaintenanceRepository(get(), get()) }
    viewModel { MaintenanceViewModel(get()) }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/data/database/dao/IDollarDao.kt
================================================
package com.example.myapplication.features.dollar.data.database.dao

import androidx.room.Dao
import androidx.room.Delete
import androidx.room.Insert
import androidx.room.OnConflictStrategy
import androidx.room.Query
import com.example.myapplication.features.dollar.data.database.entity.DollarEntity
import kotlinx.coroutines.flow.Flow

@Dao
interface IDollarDao {
    @Query("SELECT * FROM dollars")
    suspend fun getList(): List<DollarEntity>

    @Insert(onConflict = OnConflictStrategy.IGNORE)
    suspend fun insert(dollar: DollarEntity)

    @Query("DELETE FROM dollars")
    suspend fun deleteAll()

    @Insert(onConflict = OnConflictStrategy.IGNORE)
    suspend fun insertDollars(lists: List<DollarEntity>)

    @Query("SELECT * FROM dollars ORDER BY timestamp DESC")
    fun getHistory(): Flow<List<DollarEntity>>

    @Delete
    suspend fun delete(dollar: DollarEntity) // eliminar un registro especÃ­fico
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/data/database/entity/DollarEntity.kt
================================================
package com.example.myapplication.features.dollar.data.database.entity

import androidx.room.ColumnInfo
import androidx.room.Entity
import androidx.room.PrimaryKey

@Entity(tableName = "dollars")
data class DollarEntity(
    @PrimaryKey(autoGenerate = true)
    @ColumnInfo(name = "id")
    var id: Int = 0,

    @ColumnInfo(name = "dollar_official")
    var dollarOfficial: String? = null,

    @ColumnInfo(name = "dollar_parallel")
    var dollarParalelo: String? = null,

    @ColumnInfo(name = "usdt")
    var usdt: String? = null,

    @ColumnInfo(name = "usdc")
    var usdc: String? = null,

    @ColumnInfo(name = "timestamp")
    var timestamp: Long = 0
)


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/data/datasource/DollarLocalDataSource.kt
================================================
package com.example.myapplication.features.dollar.data.datasource

import com.example.myapplication.features.dollar.data.database.dao.IDollarDao
import com.example.myapplication.features.dollar.data.mapper.toEntity
import com.example.myapplication.features.dollar.data.mapper.toModel
import com.example.myapplication.features.dollar.domain.model.DollarModel
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.map

class DollarLocalDataSource(
    val dao: IDollarDao
) {
    suspend fun getList(): List<DollarModel> {
        return dao.getList().map {
            it.toModel()
        }
    }
    suspend fun deleteAll() {
        dao.deleteAll()
    }
    suspend fun inserTDollars(list: List<DollarModel>) {
        val dollarEntity = list.map { it.toEntity() }
        dao.insertDollars(dollarEntity)
    }

    suspend fun insert(dollar: DollarModel) {
        dao.insert(dollar.toEntity())
    }

    fun getHistory(): Flow<List<DollarModel>> {
        return dao.getHistory().map { list ->
            list.map { it.toModel() }
        }
    }

    suspend fun delete(dollar: DollarModel) {
        dao.delete(dollar.toEntity())
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/data/datasource/RealTimeRemoteDataSource.kt
================================================
package com.example.myapplication.features.dollar.data.datasource

import com.example.myapplication.features.dollar.domain.model.DollarModel
import com.google.firebase.Firebase
import com.google.firebase.database.DataSnapshot
import com.google.firebase.database.DatabaseError
import com.google.firebase.database.ValueEventListener
import com.google.firebase.database.database
import kotlinx.coroutines.channels.awaitClose
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.callbackFlow

class RealTimeRemoteDataSource {
    suspend fun getDollarUpdates(): Flow<DollarModel> = callbackFlow {
        val callback = object : ValueEventListener {
            override fun onCancelled(p0: DatabaseError) {
                TODO("not implemented") //To change body of created functions use File | Settings | File Templates.
                close(p0.toException())
            }
            override fun onDataChange(p0: DataSnapshot) {
//                val value = p0.getValue(String::class.java)
                val value = p0.getValue(DollarModel::class.java)
                if (value != null) {
                    trySend(value)
                }
            }
        }
//         Write a message to the database
        val database = Firebase.database
        val myRef = database.getReference("dollar")
        myRef.addValueEventListener(callback)
        awaitClose {
            myRef.removeEventListener(callback)
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/data/mapper/mapper.kt
================================================
package com.example.myapplication.features.dollar.data.mapper

import com.example.myapplication.features.dollar.data.database.entity.DollarEntity
import com.example.myapplication.features.dollar.domain.model.DollarModel

fun DollarEntity.toModel() : DollarModel {
    return DollarModel(
        dollarOfficial = dollarOfficial,
        dollarParalelo = dollarParalelo,
        usdt = usdt,
        usdc = usdc
    )
}

fun DollarModel.toEntity() : DollarEntity {
    return DollarEntity(
        dollarOfficial = dollarOfficial,
        dollarParalelo = dollarParalelo,
        usdt = usdt,
        usdc = usdc,
        timestamp = System.currentTimeMillis())
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/data/repository/DollarRepository.kt
================================================
package com.example.myapplication.features.dollar.data.repository

import com.example.myapplication.features.dollar.data.datasource.DollarLocalDataSource
import com.example.myapplication.features.dollar.data.datasource.RealTimeRemoteDataSource
import com.example.myapplication.features.dollar.domain.model.DollarModel
import com.example.myapplication.features.dollar.domain.repository.IDollarRepository
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.flow
import kotlinx.coroutines.flow.onEach

class DollarRepository(val realTimeRemoteDataSource: RealTimeRemoteDataSource,
                       val localDataSource: DollarLocalDataSource): IDollarRepository {
    override suspend fun getDollar(): Flow<DollarModel> {
        //return flow {
        //    emit(DollarModel("6.96", "12.6"))
        //}
        return realTimeRemoteDataSource.getDollarUpdates()
            .onEach {
                localDataSource.insert(it)
            }
    }

    /*fun getHistory(): Flow<List<DollarModel>> {
        return localDataSource.getHistory()
    }

    suspend fun deleteDollar(dollar: DollarModel) {
        localDataSource.delete(dollar)
    }*/
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/domain/model/DollarModel.kt
================================================
package com.example.myapplication.features.dollar.domain.model

class DollarModel(val dollarOfficial: String? = null,
                  val dollarParalelo: String? = null,
                  val usdt: String? = null,
                  val usdc: String? = null
                /*val timestamp: Long = System.currentTimeMillis()*/) {
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/domain/repository/IDollarRepository.kt
================================================
package com.example.myapplication.features.dollar.domain.repository

import com.example.myapplication.features.dollar.domain.model.DollarModel
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.flow

interface IDollarRepository {
    suspend fun getDollar(): Flow<DollarModel>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/domain/usecases/FetchDollarUseCase.kt
================================================
package com.example.myapplication.features.dollar.domain.usecases

import com.example.myapplication.features.dollar.data.repository.DollarRepository
import com.example.myapplication.features.dollar.domain.model.DollarModel
import com.example.myapplication.features.dollar.domain.repository.IDollarRepository
import kotlinx.coroutines.flow.Flow

class FetchDollarUseCase(val repository: IDollarRepository) {
    suspend fun invoke(): Flow<DollarModel> {
        return repository.getDollar()
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/presentation/DollarCard.kt
================================================
package com.example.myapplication.features.dollar.presentation

import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.material3.Card
import androidx.compose.material3.CardDefaults
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp

@Composable
fun DollarCard(title: String, value: String?) {
    Card(
        modifier = Modifier
            .fillMaxWidth()
            .padding(8.dp),
        elevation = CardDefaults.cardElevation(4.dp)
    ) {
        Column(
            modifier = Modifier.padding(16.dp),
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Text(title, style = MaterialTheme.typography.titleMedium)
            Text(value ?: "--", style = MaterialTheme.typography.headlineSmall)
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/presentation/DollarScreen.kt
================================================
package com.example.myapplication.features.dollar.presentation

import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Row
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.lazy.LazyColumn
import androidx.compose.foundation.lazy.itemsIndexed
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Delete
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.collectAsState
import androidx.compose.runtime.getValue
import androidx.compose.runtime.remember
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.unit.dp
import androidx.navigation.NavController
import com.example.myapplication.navigation.Screen
import org.koin.androidx.compose.koinViewModel
import java.text.SimpleDateFormat
import java.util.Locale

@Composable
fun DollarScreen(navController: NavController,
                 viewModelDollar: DollarViewModel = koinViewModel(),
                 ) {
    val state = viewModelDollar.uiState.collectAsState()
    val history by viewModelDollar.history.collectAsState()

    Column(
        modifier = Modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center,
    ) {
        Text("CAMBIOS DEL DOLAR", style = MaterialTheme.typography.headlineMedium)
        when (val stateValue = state.value) {
            is DollarViewModel.DollarUIState.Error -> Text(stateValue.message)
            DollarViewModel.DollarUIState.Loading -> CircularProgressIndicator()
            is DollarViewModel.DollarUIState.Success -> {

                val date = remember(stateValue.data) {
                    val format = SimpleDateFormat("dd/MM/yyyy HH:mm", Locale.getDefault())
                    format.format(System.currentTimeMillis())
                }

                DollarCard("Oficial", stateValue.data.dollarOfficial)
                DollarCard("Paralelo", stateValue.data.dollarParalelo)
                DollarCard("USDT", stateValue.data.usdt)
                DollarCard("USDC", stateValue.data.usdc)
                Text("Actualizado: $date", style = MaterialTheme.typography.headlineMedium)
            }
        }
        Button(
            modifier = Modifier.fillMaxWidth(),
            onClick = {navController.navigate(Screen.MoviesScreen.route)}
        ) {
            Text("Ver Peliculas")
        }
    }


    /*Spacer(Modifier.height(16.dp))

    Text("HistÃ³rico", style = MaterialTheme.typography.titleMedium)
    LazyColumn {
        itemsIndexed(history) { index, dollar ->
            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(8.dp),
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                Column {
                    Text("Oficial: ${dollar.dollarOfficial}")
                    Text("Paralelo: ${dollar.dollarParalelo}")
                    Text("Fecha: ${dollar.timestamp}")
                }

                IconButton(onClick = { viewModelDollar.deleteDollar(dollar) }) {
                    Icon(
                        imageVector = Icons.Default.Delete,
                        contentDescription = "Eliminar"
                    )
                }
            }
        }
    }*/
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/dollar/presentation/DollarViewModel.kt
================================================
package com.example.myapplication.features.dollar.presentation

import android.util.Log
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.example.myapplication.features.dollar.data.repository.DollarRepository
import com.example.myapplication.features.dollar.domain.model.DollarModel
import com.example.myapplication.features.dollar.domain.usecases.FetchDollarUseCase
import com.google.firebase.messaging.FirebaseMessaging
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch
import kotlin.coroutines.resume
import kotlin.coroutines.resumeWithException
import kotlin.coroutines.suspendCoroutine

class DollarViewModel(val fetchDollarUseCase: FetchDollarUseCase,
                      val repository: DollarRepository): ViewModel() {
    sealed class DollarUIState {
        object Loading : DollarUIState()
        class Error(val message: String) : DollarUIState()
        class Success(val data: DollarModel) : DollarUIState()
    }

    suspend fun getToken(): String = suspendCoroutine { continuation ->
        FirebaseMessaging.getInstance().token
            .addOnCompleteListener { task ->
                if (!task.isSuccessful) {
                    Log.w("FIREBASE", "getInstanceId failed", task.exception)
                    continuation.resumeWithException(task.exception ?: Exception("Unknown error"))
                    return@addOnCompleteListener
                }
                // Si la tarea fue exitosa, se obtiene el token
                val token = task.result
                Log.d("FIREBASE", "FCM Token: $token")


                // Reanudar la ejecuciÃ³n con el token
                continuation.resume(token ?: "")
            }
    }

    private val _history = MutableStateFlow<List<DollarModel>>(emptyList())
    val history: StateFlow<List<DollarModel>> = _history.asStateFlow()

    init {
        getDollar()
        //getHistory()
    }

    private val _uiState = MutableStateFlow<DollarUIState>(DollarUIState.Loading)
    val uiState: StateFlow<DollarUIState> = _uiState.asStateFlow()


    fun getDollar() {
        viewModelScope.launch(Dispatchers.IO) {
            getToken()
            fetchDollarUseCase.invoke().collect {
                    data -> _uiState.value = DollarUIState.Success(data) }
        }
    }

    /*fun getHistory() {
        viewModelScope.launch {
            repository.getHistory().collect { list ->
                _history.value = list
            }
        }
    }

    fun deleteDollar(dollar: DollarModel) {
        viewModelScope.launch(Dispatchers.IO) {
            repository.deleteDollar(dollar)
        }
    }*/
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/data/api/GithubService.kt
================================================
package com.example.myapplication.features.github.data.api

import com.example.myapplication.features.github.data.api.dto.GithubDto
import retrofit2.Response
import retrofit2.http.GET
import retrofit2.http.Path

//contrato de como consumir un servicio

interface GithubService {
    @GET("/users/{githubLogin}")
    suspend fun getInfoAvatar(@Path("githubLogin") githubLogin: String): Response<GithubDto>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/data/api/dto/GithubDto.kt
================================================
package com.example.myapplication.features.github.data.api.dto
import com.google.gson.annotations.SerializedName

data class GithubDto(val login: String, @SerializedName("avatar_url") val url: String) {
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/data/datasourse/GithubRemoteDataSource.kt
================================================
package com.example.myapplication.features.github.data.datasourse

import com.example.myapplication.features.github.data.api.dto.GithubDto
import com.example.myapplication.features.github.data.api.GithubService

//llama a la interfaz girhubService

class GithubRemoteDataSource(val githubService: GithubService) {
    suspend fun getUser(nick: String): Result<GithubDto> {
        val response = githubService.getInfoAvatar(nick)
        if (response.isSuccessful) {
            return Result.success(response.body()!!)
        } else {
            return Result.failure(Exception("Error al obtener el usuario"))
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/data/repository/GithubRepository.kt
================================================
package com.example.myapplication.features.github.data.repository

import com.example.myapplication.features.github.data.datasourse.GithubRemoteDataSource
import com.example.myapplication.features.github.domain.model.NickName
import com.example.myapplication.features.github.domain.model.UrlPath
import com.example.myapplication.features.github.domain.model.UserModel
import com.example.myapplication.features.github.domain.repository.IgithubRepository

class GithubRepository(val remoteDataSource: GithubRemoteDataSource
): IgithubRepository {
    override suspend fun findbyNickName(value: String): Result<UserModel> {
        val response = remoteDataSource.getUser(value)

        response.fold(
            onSuccess = {
                    it ->
                return Result.success(UserModel(
                    nickName = NickName( it.login),
                    pathURL = UrlPath(it.url)
                ))
            },
            onFailure = {
                return Result.failure(it)
            }
        )
    }
}




================================================
FILE: app/src/main/java/com/example/myapplication/features/github/domain/model/NickName.kt
================================================
package com.example.myapplication.features.github.domain.model

@JvmInline
value class NickName(val value: String) {
    init{
        require(value.isNotEmpty()){
            "NickName must not be empty"
        }

        require(value.length < 10){
            "Nickname must be less tham 10 characters"
        }

        require(value.length >= 3){
            "NickName must be at least 3 characters"
        }

        require(! value.contains(" ")){
            "Nickname must not contain spaces ' '"
        }
    }

    override fun toString(): String = value
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/domain/model/UrlPath.kt
================================================
package com.example.myapplication.features.github.domain.model

@JvmInline
value class UrlPath(val value: String) {
    init {
        require(value.isNotEmpty()){
            "UrlPath must not be empty"
        }

        require(value.startsWith("https://")){
            "UlrPath must start with 'https'"
        }
    }

    override fun toString(): String = value
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/domain/model/UserModel.kt
================================================
package com.example.myapplication.features.github.domain.model

class UserModel(val nickName: NickName, val pathURL: UrlPath) {
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/domain/repository/IgithubRepository.kt
================================================
package com.example.myapplication.features.github.domain.repository

import com.example.myapplication.features.github.domain.model.UserModel

interface IgithubRepository {
    suspend fun findbyNickName(value: String): Result<UserModel>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/domain/usercases/FindByNickNameUseCase.kt
================================================
package com.example.myapplication.features.github.domain.usercases

import com.example.myapplication.features.github.domain.model.UserModel
import com.example.myapplication.features.github.domain.repository.IgithubRepository

class FindByNickNameUseCase(val repository: IgithubRepository) {
    suspend fun invoke(nickName: String): Result<UserModel>{
        return repository.findbyNickName(nickName)
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/presentation/GirhubViewModel.kt
================================================
package com.example.myapplication.features.github.presentation

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.example.myapplication.features.github.domain.model.UserModel
import com.example.myapplication.features.github.domain.usercases.FindByNickNameUseCase
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

class GirhubViewModel(
    val usecase: FindByNickNameUseCase
): ViewModel() {
    sealed class GithubStateUI{
        object Init: GithubStateUI()
        object Loading: GithubStateUI()
        class Error(val message: String): GithubStateUI()
        class Success(val github: UserModel): GithubStateUI()
    }
    private val _state = MutableStateFlow<GithubStateUI>(GithubStateUI.Init)
    val state : StateFlow<GithubStateUI> = _state.asStateFlow()

    fun fetchAlias(nickname: String){
        viewModelScope.launch(context = Dispatchers.IO) {
            _state.value = GithubStateUI.Loading
            val result = usecase.invoke(nickname)

            result.fold(
                onSuccess = {
                    user -> _state.value = GithubStateUI.Success(user)
                },
                onFailure = {
                    error -> _state.value = GithubStateUI.Error(message = error.message ?: "Error desconocido")
                }
            )
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/github/presentation/GithubScreen.kt
================================================
package com.example.myapplication.features.github.presentation

import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.material3.OutlinedButton
import androidx.compose.material3.OutlinedTextField
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.collectAsState
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.layout.ContentScale
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import coil3.compose.AsyncImage
import org.koin.androidx.compose.koinViewModel

@Composable
fun GithubScreen(modifier: Modifier,
                 vm: GirhubViewModel = koinViewModel()
                ){
    var nickname by remember { mutableStateOf("") }
    val state by vm.state.collectAsState()

    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(20.dp),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        Text("Github Search", fontSize = 24.sp)

        OutlinedTextField(
            value = nickname,
            onValueChange = { nickname = it },
            label = { Text("Nickname") },
            modifier = Modifier.fillMaxWidth()
        )

        OutlinedButton(
            onClick = { vm.fetchAlias(nickname) },
            modifier = Modifier
                .fillMaxWidth()
                .padding(top = 10.dp)
        ) {
            Text("Buscar")
        }

        Spacer(modifier = Modifier.height(16.dp))

        when (val st = state) {
            is GirhubViewModel.GithubStateUI.Error -> {
                Text(st.message, color = Color.Red)
            }
            GirhubViewModel.GithubStateUI.Init -> {
                Text("Esperando bÃºsqueda...")
            }
            GirhubViewModel.GithubStateUI.Loading -> {
                Text("Buscando...")
            }
            is GirhubViewModel.GithubStateUI.Success -> {
                Text("Usuario: ${st.github.nickName}")
                AsyncImage(
                    model = st.github.pathURL.value,
                    contentDescription = null,
                    modifier = Modifier
                        .size(120.dp)
                        .padding(top = 10.dp),
                    contentScale = ContentScale.Crop,
                )
                Text(st.github.pathURL.value, fontSize = 12.sp, color = Color.Gray)
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/data/repository/LoginRepository.kt
================================================
package com.example.myapplication.features.login.data.repository

import com.example.myapplication.features.login.domain.model.Email
import com.example.myapplication.features.login.domain.model.Password
import com.example.myapplication.features.login.domain.model.UserLoginModel
import com.example.myapplication.features.login.domain.repository.ILoginRepository

class LoginRepository: ILoginRepository {
    override fun login(username: String, password: String): Result<UserLoginModel> {
        // AquÃ­ lo mÃ¡s simple posible: hardcodeamos credenciales
        return if (username == "admin" && password == "1234") {
            Result.success(UserLoginModel(Email(username), Password("fake_token_12345")))
        } else {
            Result.failure(Exception("Credenciales incorrectas"))
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/domain/model/Email.kt
================================================
package com.example.myapplication.features.login.domain.model

@JvmInline
value class Email(val value: String) {
    companion object{
        fun create(raw: String): Email {
            require(raw.isNotEmpty()){
                "Email must not be empty"
            }

            val normalized = raw.trim().lowercase()

            require(normalized.contains("@")){
                "Email must contain @"
            }
            return Email(normalized)
        }
    }
    override fun toString(): String = value
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/domain/model/Password.kt
================================================
package com.example.myapplication.features.login.domain.model

@JvmInline
value class Password(val value: String) {
    init {
        require(value.isNotEmpty()){
            "Password must not be empty"
        }
    }

    override fun toString(): String = value
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/domain/model/UserLoginModel.kt
================================================
package com.example.myapplication.features.login.domain.model

class UserLoginModel(val username: Email, val password: Password) {
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/domain/repository/ILoginRepository.kt
================================================
package com.example.myapplication.features.login.domain.repository

import com.example.myapplication.features.login.domain.model.UserLoginModel

interface ILoginRepository {
    fun login(username: String, password: String): Result<UserLoginModel>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/domain/usercases/LoginUseCase.kt
================================================
package com.example.myapplication.features.login.domain.usercases

import com.example.myapplication.features.login.domain.model.UserLoginModel
import com.example.myapplication.features.login.domain.repository.ILoginRepository

class LoginUseCase(private val repository: ILoginRepository) {
    operator fun invoke(username: String, password: String): Result<UserLoginModel> {
        return repository.login(username, password)
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/presentation/LogInPage.kt
================================================
package com.example.myapplication.features.login.presentation

import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.material3.Button
import androidx.compose.material3.Text
import androidx.compose.material3.TextField
import androidx.compose.runtime.Composable
import androidx.compose.runtime.collectAsState
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.text.input.PasswordVisualTransformation
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import org.koin.androidx.compose.koinViewModel

@Composable
fun LogInPage(vm: LogInViewModel = koinViewModel(), onSuccess:() -> Unit){
    var userSignIn by remember { mutableStateOf("") }
    var passwordSignIn by remember { mutableStateOf("") }
    val state by vm.state.collectAsState()

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(20.dp),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        Text("Login", fontSize = 24.sp)

        TextField(
            value = userSignIn,
            onValueChange = { userSignIn = it },
            label = { Text("Email") },
            modifier = Modifier.fillMaxWidth()
        )

        TextField(
            value = passwordSignIn,
            onValueChange = { passwordSignIn = it },
            label = { Text("ContraseÃ±a") },
            visualTransformation = PasswordVisualTransformation(),
            modifier = Modifier.fillMaxWidth(),
        )

        Button(
            modifier = Modifier.fillMaxWidth(),
            onClick = { vm.login(userSignIn, passwordSignIn) }
        ) {
            Text("Ingresar")
        }

        when (val st = state) {
            is LogInViewModel.LoginStateUI.Init -> Text("Esperando credenciales...")
            is LogInViewModel.LoginStateUI.Loading -> Text("Verificando...")
            is LogInViewModel.LoginStateUI.Error -> Text("Error: ${st.message}", color = Color.Red)
            is LogInViewModel.LoginStateUI.Success -> {
                Text("Bienvenido ${st.user.username}!")
                onSuccess() // cuando loguea con Ã©xito
            }

            is LogInViewModel.LoginStateUI.Error -> TODO()
            LogInViewModel.LoginStateUI.Init -> TODO()
            LogInViewModel.LoginStateUI.Loading -> TODO()
            is LogInViewModel.LoginStateUI.Success -> TODO()
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/login/presentation/LogInViewModel.kt
================================================
package com.example.myapplication.features.login.presentation

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.example.myapplication.features.github.domain.usercases.FindByNickNameUseCase
import com.example.myapplication.features.login.domain.model.UserLoginModel
import com.example.myapplication.features.login.domain.usercases.LoginUseCase
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

class LogInViewModel(
    val loginusecase: LoginUseCase
): ViewModel() {
    sealed class LoginStateUI{
        object Init: LoginStateUI()
        object Loading: LoginStateUI()
        data class Success(val user: UserLoginModel) : LoginStateUI()
        data class Error(val message: String): LoginStateUI()
    }
    private val _state = MutableStateFlow<LoginStateUI>(LoginStateUI.Init)
    val state : StateFlow<LoginStateUI> = _state.asStateFlow()

    fun login(username: String, password: String){
        viewModelScope.launch(Dispatchers.IO) {
            _state.value = LoginStateUI.Loading
            val result = loginusecase(username, password)

            result.fold(
                onSuccess = { user -> _state.value = LoginStateUI.Success(user) },
                onFailure = { error -> _state.value = LoginStateUI.Error(error.message ?: "Error desconocido") }
            )
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/logs/LogScheduler.kt
================================================
package com.example.myapplication.features.logs
import android.content.Context
import androidx.work.Constraints
import androidx.work.ExistingPeriodicWorkPolicy
import androidx.work.NetworkType
import androidx.work.PeriodicWorkRequest
import androidx.work.WorkManager
import java.util.concurrent.TimeUnit


class LogScheduler(
    private val context: Context
) {
    private val LOG_WORKNAME = "logUploadWork"
    private val INTERVAL_MINUTES = 15L


    fun schedulePeriodicaUpload() {
        val logRequest = PeriodicWorkRequest.Builder(
            LogUploadWorker::class.java,
            INTERVAL_MINUTES,
            TimeUnit.MINUTES
        )
            .setConstraints(
                Constraints.Builder()
                    .setRequiredNetworkType(NetworkType.CONNECTED)
                    .build()
            ).build()


        WorkManager.getInstance(context.applicationContext).enqueueUniquePeriodicWork(
            LOG_WORKNAME,
            ExistingPeriodicWorkPolicy.KEEP,
            logRequest
        )
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/logs/LogUploadWorker.kt
================================================
package com.example.myapplication.features.logs

import android.content.Context
import androidx.work.CoroutineWorker
import androidx.work.WorkerParameters
import com.example.myapplication.features.movies.domain.usercases.GetMoviesUseCase
import org.koin.core.component.KoinComponent
import org.koin.core.component.inject

class LogUploadWorker(
    appContext: Context,
    workerParameters: WorkerParameters
) : CoroutineWorker(appContext, workerParameters) , KoinComponent {


    private val fetchPopularMoviesUseCase: GetMoviesUseCase by inject()


    override suspend fun doWork(): Result {


        println("ejecutar instrucciÃ³n para subir datos")
        val response = fetchPopularMoviesUseCase.invoke()
        response.fold(
            onFailure = {
                return Result.failure()
            },
            onSuccess = {
                println("datos subidos ${it.size}")
                return Result.success()
            }
        )


    }
}




================================================
FILE: app/src/main/java/com/example/myapplication/features/logs/data/datasource/LogsRemoteDataSource.kt
================================================
package com.example.myapplication.features.logs.data.datasource
import com.develoop.logs.LogApi
import com.develoop.logs.LogServiceGrpcKt
import com.google.android.datatransport.cct.internal.LogRequest
import com.google.android.datatransport.cct.internal.LogResponse
import io.grpc.ManagedChannel
import io.grpc.ManagedChannelBuilder
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext

class LogsRemoteDataSource(
    host: String,
    port: Int,
    private val usePlaintext: Boolean = true
) {
    private val channel: ManagedChannel = ManagedChannelBuilder
        .forAddress(host, port)
        .apply {
            if(usePlaintext) usePlaintext()
        }
        .build()
    private val stub = LogServiceGrpcKt.LogServiceCoroutineStub(channel)
    suspend fun send(request: LogApi.LogRequest): LogApi.LogResponse = withContext(Dispatchers.IO) {
        stub.send(request)
    }
    fun shutdown() {
        channel.shutdownNow()
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/maintenance/data/MaintenanceDataStore.kt
================================================
package com.example.myapplication.features.maintenance.data

import android.content.Context
import androidx.datastore.preferences.core.booleanPreferencesKey
import androidx.datastore.preferences.core.edit
import androidx.datastore.preferences.preferencesDataStore
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.map

val Context.maintenanceDataStore by preferencesDataStore(name = "maintenance_preferences")
class MaintenanceDataStore(private val context: Context) {
    companion object {
        val MAINTENANCE_MODE = booleanPreferencesKey("maintenance_mode")
    }

    suspend fun setMaintenanceMode(isUnderMaintenance: Boolean) {
        context.maintenanceDataStore.edit { preferences ->
            preferences[MAINTENANCE_MODE] = isUnderMaintenance
        }
    }

    fun getMaintenanceMode(): Flow<Boolean> {
        return context.maintenanceDataStore.data.map { preferences ->
            preferences[MAINTENANCE_MODE] ?: false
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/maintenance/data/MaintenanceRepository.kt
================================================
package com.example.myapplication.features.maintenance.data
import android.util.Log
import com.google.firebase.remoteconfig.FirebaseRemoteConfig
import com.google.firebase.remoteconfig.FirebaseRemoteConfigSettings
import com.example.myapplication.R
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.flow
import kotlinx.coroutines.tasks.await

class MaintenanceRepository(
    private val remoteConfig: FirebaseRemoteConfig,
    private val dataStore: MaintenanceDataStore
) {
    init {
        setupRemoteConfig()
    }

    private fun setupRemoteConfig() {
        try {
            val configSettings = FirebaseRemoteConfigSettings.Builder()
                .setMinimumFetchIntervalInSeconds(60) // Fetch cada minuto
                .build()
            remoteConfig.setConfigSettingsAsync(configSettings)
            remoteConfig.setDefaultsAsync(R.xml.remote_config_defaults)
            Log.d("MaintenanceRepository", "Remote Config iniciado correctamente")
        } catch (e: Exception) {
            Log.e("MaintenanceRepository", "Error al iniciar Remote Config", e)
        }
    }

    suspend fun fetchMaintenanceStatus(): Flow<Boolean> = flow {
        try {
            remoteConfig.fetchAndActivate().await()
            val maintenanceMode = remoteConfig.getBoolean("maintenance_mode")

            Log.d("MaintenanceRepository", "Maintenance Mode obtenido: $maintenanceMode")

            dataStore.setMaintenanceMode(maintenanceMode)
            emit(maintenanceMode)
        } catch (e: Exception) {
            Log.e("MaintenanceRepository", "Error al obtener maintenance status", e)
            dataStore.getMaintenanceMode().collect { emit(it) }
        }
    }

    fun observeMaintenanceStatus(): Flow<Boolean> {
        return dataStore.getMaintenanceMode()
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/maintenance/presentation/MaintenanceOverlay.kt
================================================
package com.example.myapplication.features.maintenance.presentation

import androidx.compose.foundation.background
import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.padding
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp

@Composable
fun MaintenanceOverlay() {
    Column(
        modifier = Modifier
            .fillMaxSize()
            .background(Color.White),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        Text(
            text = "La aplicaciÃ³n estÃ¡ en mantenimiento",
            fontSize = 28.sp,
            textAlign = TextAlign.Center,
            modifier = Modifier.padding(16.dp),
            style = MaterialTheme.typography.headlineMedium,
            color = Color.Black
        )
        Text(
            text = "No se puede usar la app en este momento.\nIntenta mÃ¡s tarde.",
            fontSize = 16.sp,
            textAlign = TextAlign.Center,
            modifier = Modifier.padding(16.dp),
            style = MaterialTheme.typography.bodyLarge,
            color = Color.Gray
        )
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/maintenance/presentation/MaintenanceViewModel.kt
================================================
package com.example.myapplication.features.maintenance.presentation

import android.util.Log
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.example.myapplication.features.maintenance.data.MaintenanceRepository
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.delay
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

class MaintenanceViewModel(private val repository: MaintenanceRepository): ViewModel() {
    private val _maintenanceMode = MutableStateFlow(false)
    val maintenanceMode: StateFlow<Boolean> = _maintenanceMode.asStateFlow()

    init {
        observeMaintenanceStatus()
        startPeriodicFetch()
    }

    private fun observeMaintenanceStatus() {
        viewModelScope.launch {
            repository.observeMaintenanceStatus().collect { isMaintenance ->
                _maintenanceMode.value = isMaintenance
                Log.d("MaintenanceViewModel", "Maintenance status observado: $isMaintenance")
            }
        }
    }

    private fun startPeriodicFetch() {
        viewModelScope.launch(Dispatchers.IO) {
            while (true) {
                try {
                    fetchMaintenanceStatus()
                    delay(10000) // Fetch cada 10 segundos (puedes cambiar a 30000 para 30 segundos)
                } catch (e: Exception) {
                    Log.e("MaintenanceViewModel", "Error en periodic fetch", e)
                    delay(10000)
                }
            }
        }
    }

    private suspend fun fetchMaintenanceStatus() {
        try {
            repository.fetchMaintenanceStatus().collect { isMaintenance ->
                _maintenanceMode.value = isMaintenance
                Log.d("MaintenanceViewModel", "Fetch periÃ³dico completado: $isMaintenance")
            }
        } catch (e: Exception) {
            Log.e("MaintenanceViewModel", "Error en fetchMaintenanceStatus", e)
        }
    }

    fun refreshMaintenanceStatus() {
        viewModelScope.launch(Dispatchers.IO) {
            fetchMaintenanceStatus()
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/api/MovieService.kt
================================================
package com.example.myapplication.features.movies.data.api

import com.example.myapplication.features.movies.data.api.dto.MoviePageDto
import retrofit2.Response
import retrofit2.http.GET
import retrofit2.http.Query
import com.example.myapplication.R

interface MovieService {
    @GET("discover/movie")
    suspend fun getMovies(
        @Query("sort_by") sortBy: String = "popularity.desc",
        @Query("api_key") apiKey: String
    ): Response<MoviePageDto>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/api/dto/MovieDto.kt
================================================
package com.example.myapplication.features.movies.data.api.dto

import com.google.gson.annotations.SerializedName

data class MovieDto(@SerializedName("title") val title: String,
               @SerializedName("poster_path") val poster_path: String,
                @SerializedName("overview") val overview: String) {
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/api/dto/MoviePageDto.kt
================================================
package com.example.myapplication.features.movies.data.api.dto

import com.google.gson.annotations.SerializedName

data class MoviePageDto(@SerializedName("page") val page: Int,
                   @SerializedName("results") val results: List<MovieDto>) {
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/database/AppRoomDatabase.kt
================================================
package com.example.myapplication.features.movies.data.database

import android.content.Context
import androidx.room.Database
import androidx.room.Room
import androidx.room.RoomDatabase
import androidx.room.migration.Migration
import androidx.sqlite.SQLiteConnection
import androidx.sqlite.execSQL
import com.example.myapplication.features.dollar.data.database.dao.IDollarDao
import com.example.myapplication.features.dollar.data.database.entity.DollarEntity
import com.example.myapplication.features.movies.data.database.dao.IMovieDao
import com.example.myapplication.features.movies.data.database.entity.MovieEntity

/*val MIGRATION_1_2 = object: Migration(2,3){
    override fun migrate(database: SQLiteConnection) {
        database.execSQL("ALTER TABLE 'movies' ADD COLUMN timestamp TEXT")
        database.execSQL("UPDATE movies SET timestamp = '' WHERE timestamp IS NULL")
    }
}*/

val MIGRATION_1_2 = object : Migration(1, 2) {
    override fun migrate(database: SQLiteConnection) {
        database.execSQL("""
            CREATE TABLE IF NOT EXISTS `movies` (
                `id` INTEGER PRIMARY KEY NOT NULL, 
                `title` TEXT NOT NULL, 
                `poster_url` TEXT NOT NULL, 
                `overview` TEXT NOT NULL
            )
        """.trimIndent())
    }
}

val MIGRATION_2_3 = object : Migration(2, 3) {
    override fun migrate(database: SQLiteConnection) {
        database.execSQL("ALTER TABLE `movies` ADD COLUMN `timestamp` TEXT")
        database.execSQL("UPDATE movies SET timestamp = '' WHERE timestamp IS NULL")
    }
}

// MigraciÃ³n de 3 a 4: Agregar columna favourite
val MIGRATION_3_4 = object : Migration(3, 4) {
    override fun migrate(connection: SQLiteConnection) {
        connection.execSQL("ALTER TABLE 'movies' ADD COLUMN favourite INTEGER NOT NULL DEFAULT 0")
    }
}

@Database(entities = [DollarEntity::class, MovieEntity::class], version = 4)
abstract class AppRoomDatabase: RoomDatabase() {
    abstract fun dollarDao(): IDollarDao
    abstract fun movieDao(): IMovieDao


    companion object {
        @Volatile
        private var Instance: AppRoomDatabase? = null

        /*fun getDatabase(context: Context): AppRoomDatabase {
            return Instance ?: synchronized(this) {
                Room.databaseBuilder(
                    context.applicationContext,
                    AppRoomDatabase::class.java,
                    "movies_db"
                )
                    //.fallbackToDestructiveMigration()
                    .addMigrations(MIGRATION_1_2)
                    .build()
                    .also { Instance = it }
            }
        }*/


        fun getDatabase(context: Context): AppRoomDatabase {
            // if the Instance is not null, return it, otherwise create a new database instance.
            return Instance ?: synchronized(this) {
                Room.databaseBuilder(
                    context,
                    AppRoomDatabase::class.java,
                    "local_db")
                    .addMigrations(MIGRATION_1_2, MIGRATION_2_3)
                    .fallbackToDestructiveMigration()
                    .build()
                    .also { Instance = it }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/database/dao/IMovieDao.kt
================================================
package com.example.myapplication.features.movies.data.database.dao

import androidx.room.Dao
import androidx.room.Insert
import androidx.room.OnConflictStrategy
import androidx.room.Query
import com.example.myapplication.features.movies.data.database.entity.MovieEntity
import kotlinx.coroutines.flow.Flow

@Dao
interface IMovieDao {
    @Query("SELECT * FROM movies")
    fun getAllMovies(): Flow<List<MovieEntity>>

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insertMovies(movies: List<MovieEntity>)

    @Query("UPDATE movies SET favourite = :isFavourite WHERE id = :movieId")
    suspend fun updateFavourite(movieId: Int, isFavourite: Int)

    @Query("SELECT * FROM movies WHERE favourite = 1")
    fun getFavouriteMovies(): Flow<List<MovieEntity>>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/database/entity/MovieEntity.kt
================================================
package com.example.myapplication.features.movies.data.database.entity

import androidx.room.ColumnInfo
import androidx.room.Entity
import androidx.room.PrimaryKey

@Entity(tableName = "movies")
data class MovieEntity(
    @PrimaryKey
    @ColumnInfo(name = "id")
    val id: Int,

    @ColumnInfo(name = "title")
    val title: String,

    @ColumnInfo(name = "poster_url")
    val posterUrl: String,

    @ColumnInfo(name = "timestamp")
    val timestamp: String? = "",

    @ColumnInfo(name = "overview")
    val overview: String,

    @ColumnInfo(name = "favourite")
    val favourite: Int = 0
)


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/datasource/MovieLocalDataSource.kt
================================================
package com.example.myapplication.features.movies.data.datasource

import com.example.myapplication.features.movies.data.database.dao.IMovieDao
import com.example.myapplication.features.movies.data.mapper.toEntity
import com.example.myapplication.features.movies.data.mapper.toModel
import com.example.myapplication.features.movies.domain.model.MovieModel
import kotlinx.coroutines.flow.Flow
import kotlinx.coroutines.flow.map

class MovieLocalDataSource(val dao: IMovieDao) {
    fun getMovies(): Flow<List<MovieModel>> {
        return dao.getAllMovies().map { list -> list.map { it.toModel() } }
    }

    suspend fun saveMovies(movies: List<MovieModel>, ids: List<Int>) {
        val entities = movies.mapIndexed { index, model ->
            model.toEntity(ids[index])
        }
        dao.insertMovies(entities)
    }

    suspend fun toggleFavourite(movieId: Int, isFavourite: Boolean) {
        dao.updateFavourite(movieId, if (isFavourite) 1 else 0)
    }

    fun getFavouriteMovies(): Flow<List<MovieModel>> {
        return dao.getFavouriteMovies().map { list -> list.map { it.toModel() } }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/datasource/MovieRemoteDataSource.kt
================================================
package com.example.myapplication.features.movies.data.datasource

import android.content.Context
import com.example.myapplication.R
import com.example.myapplication.features.movies.data.api.MovieService
import com.example.myapplication.features.movies.data.api.dto.MoviePageDto

class MovieRemoteDataSource(val movieServidce: MovieService, val context: Context) {
    suspend fun getMovies(): Result<MoviePageDto> {
        val response = movieServidce.getMovies(apiKey = context.getString(R.string.api_key_movies))
        if (response.isSuccessful) {
            val body = response.body()
            if (body != null) {
                return Result.success(body)
            } else {
                return Result.failure(Exception("Respuesta vacÃ­a del servidor"))
            }
        } else {
            // Log detallado
            val errorBody = response.errorBody()?.string()
            return Result.failure(
                Exception("Error ${response.code()} - ${response.message()} - $errorBody")
            )
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/mapper/mapper.kt
================================================
package com.example.myapplication.features.movies.data.mapper

import com.example.myapplication.features.movies.data.database.entity.MovieEntity
import com.example.myapplication.features.movies.domain.model.MovieModel

fun MovieEntity.toModel(): MovieModel {
    val posterURL = ""
    return MovieModel(
        id = id,
        title = title,
        posterURL = posterURL,
        overview = overview,
        favourite = favourite == 1)
}

fun MovieModel.toEntity(id: Int): MovieEntity {
    return MovieEntity(
        id = id,
        title = title,
        posterUrl = posterURL,
        overview = overview,
        favourite = if (favourite) 1 else 0)
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/data/repository/MovieRepository.kt
================================================
package com.example.myapplication.features.movies.data.repository

import com.example.myapplication.features.dollar.data.datasource.DollarLocalDataSource
import com.example.myapplication.features.movies.data.api.dto.MoviePageDto
import com.example.myapplication.features.movies.data.datasource.MovieLocalDataSource
import com.example.myapplication.features.movies.data.datasource.MovieRemoteDataSource
import com.example.myapplication.features.movies.domain.model.MovieModel
import com.example.myapplication.features.movies.domain.repository.IMovieRepository
import kotlinx.coroutines.flow.Flow

class MovieRepository(val remoteDatasource: MovieRemoteDataSource,
                      val localDataSource: MovieLocalDataSource): IMovieRepository {
    override suspend fun getMovies(): Result<List<MovieModel>> {
        val response = remoteDatasource.getMovies()

        return response.fold(
            onSuccess = { pageDto ->
                val movies = pageDto.results.map {
                    MovieModel(
                        title = it.title,
                        posterURL = "https://image.tmdb.org/t/p/w185${it.poster_path}",
                        overview = it.overview,
                        favourite = false
                    )
                }

                val ids = pageDto.results.mapIndexed { _, dto -> dto.hashCode() }
                localDataSource.saveMovies(movies, ids)

                Result.success(movies)
            },
            onFailure = { error ->
                Result.failure(error)
            }
        )
    }

    fun getMoviesFromDb(): Flow<List<MovieModel>> {
        return localDataSource.getMovies()
    }

    suspend fun toggleFavourite(movieId: Int, isFavourite: Boolean) {
        localDataSource.toggleFavourite(movieId, isFavourite)
    }

    fun getFavouriteMovies(): Flow<List<MovieModel>> {
        return localDataSource.getFavouriteMovies()
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/domain/model/MovieModel.kt
================================================
package com.example.myapplication.features.movies.domain.model

import kotlinx.serialization.Serializable

@Serializable
class MovieModel(val id: Int = 0,
                 val title: String,
                 val posterURL: String,
                 val overview: String,
                 val favourite: Boolean = false) {
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/domain/repository/IMovieRepository.kt
================================================
package com.example.myapplication.features.movies.domain.repository

import com.example.myapplication.features.movies.domain.model.MovieModel

interface IMovieRepository {
    suspend fun getMovies(): Result<List<MovieModel>>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/domain/usercases/GetMoviesUseCase.kt
================================================
package com.example.myapplication.features.movies.domain.usercases

import com.example.myapplication.features.movies.domain.model.MovieModel
import com.example.myapplication.features.movies.domain.repository.IMovieRepository

class GetMoviesUseCase(val repository: IMovieRepository) {
    suspend fun invoke(): Result<List<MovieModel>>{
        return repository.getMovies()
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/presentation/MovieDetailScreen.kt
================================================
package com.example.myapplication.features.movies.presentation

import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.width
import androidx.compose.foundation.shape.RoundedCornerShape
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.automirrored.filled.ArrowBack
import androidx.compose.material.icons.filled.ArrowBack
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.Scaffold
import androidx.compose.material3.Text
import androidx.compose.material3.TopAppBar
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.clip
import androidx.compose.ui.layout.ContentScale
import androidx.compose.ui.unit.dp
import coil3.compose.AsyncImage
import com.example.myapplication.features.movies.domain.model.MovieModel

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun MovieDetailScreen(movie: MovieModel, back: () -> Unit) {
    Scaffold(
        topBar = {
            TopAppBar(
                title = {
                    Text(text = "Movie Details")
                },
                navigationIcon = {
                    IconButton(
                        onClick = back,
                        content = {
                            Icon(
                                imageVector = Icons.Default.ArrowBack,
                                contentDescription = "Back"
                            )
                        }
                    )
                }
            )
        },
        content = { paddingValues ->
            Column(
                modifier = Modifier.padding(paddingValues)
            ) {
                AsyncImage(
                    model = movie.posterURL,
                    contentDescription = movie.title,
                    modifier = Modifier
                        .height(150.dp)
                        .width(100.dp)
                        .clip(RoundedCornerShape(8.dp)),
                    contentScale = ContentScale.Crop
                )
                Text(text = "TÃ­tulo: ${movie.title}")
                Text(text = "DescripciÃ³n: ${movie.overview}")
            }
        }
    )
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/presentation/MoviesScreen.kt
================================================
package com.example.myapplication.features.movies.presentation

import androidx.compose.foundation.ExperimentalFoundationApi
import androidx.compose.foundation.clickable
import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.PaddingValues
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.lazy.grid.GridCells
import androidx.compose.foundation.lazy.grid.LazyVerticalGrid
import androidx.compose.foundation.lazy.grid.itemsIndexed
import androidx.compose.foundation.shape.RoundedCornerShape
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.Favorite
import androidx.compose.material.icons.outlined.FavoriteBorder
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.Icon
import androidx.compose.material3.IconButton
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.collectAsState
import androidx.compose.runtime.getValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.clip
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.layout.ContentScale
import androidx.compose.ui.unit.dp
import androidx.compose.ui.unit.sp
import coil3.compose.AsyncImage
import org.koin.androidx.compose.koinViewModel
import com.example.myapplication.features.movies.domain.model.MovieModel

@OptIn(ExperimentalFoundationApi::class)
@Composable
fun MoviesScreen(
    modifier: Modifier = Modifier,
    vm: MoviesViewModel = koinViewModel(),
    navigateToDetail: (movie: MovieModel) -> Unit
) {
    val state by vm.state.collectAsState()

    LaunchedEffect(Unit) {
        vm.fetchMovies()
    }

    Column(
        modifier = modifier
            .fillMaxSize()
            .padding(16.dp)
    ) {
        Text(
            "PelÃ­culas Populares",
            fontSize = 24.sp,
            modifier = Modifier.align(Alignment.CenterHorizontally)
        )

        Spacer(modifier = Modifier.height(16.dp))

        when (val st = state) {
            is MoviesViewModel.MoviesUiState.Init -> {
                Text("Esperando...")
            }
            is MoviesViewModel.MoviesUiState.Loading -> {
                CircularProgressIndicator(modifier = Modifier.align(Alignment.CenterHorizontally))
            }
            is MoviesViewModel.MoviesUiState.Error -> {
                Text("Error: ${st.message}", color = Color.Red)
            }
            is MoviesViewModel.MoviesUiState.Success -> {
                LazyVerticalGrid(
                    columns = GridCells.Fixed(3),
                    modifier = Modifier.fillMaxSize(),
                    contentPadding = PaddingValues(8.dp),
                    horizontalArrangement = Arrangement.spacedBy(8.dp),
                    verticalArrangement = Arrangement.spacedBy(8.dp)
                ) {
                    itemsIndexed(st.movies) { index, movie ->
                        Column(
                            horizontalAlignment = Alignment.CenterHorizontally,
                            modifier = Modifier
                                .fillMaxWidth()
                                .clickable{
                                    navigateToDetail(movie)
                                }
                        ) {
                            AsyncImage(
                                model = movie.posterURL,
                                contentDescription = movie.title,
                                modifier = Modifier
                                    .height(150.dp)
                                    .fillMaxWidth()
                                    .clip(RoundedCornerShape(8.dp)),
                                contentScale = ContentScale.Crop
                            )
                            Spacer(modifier = Modifier.height(4.dp))
                            Text(
                                movie.title,
                                fontSize = 14.sp,
                                maxLines = 2
                            )
                            IconButton(
                                onClick = {
                                    vm.toggleFavourite(movie.id, movie.favourite)
                                },
                                modifier = Modifier
                                    .align(Alignment.CenterHorizontally)
                                    .size(32.dp)
                            ) {
                                Icon(
                                    imageVector = if (movie.favourite) {
                                        Icons.Filled.Favorite
                                    } else {
                                        Icons.Outlined.FavoriteBorder
                                    },
                                    contentDescription = if (movie.favourite) {
                                        "Quitar de favoritos"
                                    } else {
                                        "Agregar a favoritos"
                                    },
                                    tint = if (movie.favourite) Color.Red else Color.Gray
                                )
                            }
                        }

                    }
                }
            }
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/movies/presentation/MoviesViewModel.kt
================================================
package com.example.myapplication.features.movies.presentation

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.develoop.logs.LogApi
import com.example.myapplication.features.github.presentation.GirhubViewModel.GithubStateUI
import com.example.myapplication.features.logs.data.datasource.LogsRemoteDataSource
import com.example.myapplication.features.movies.data.repository.MovieRepository
import com.example.myapplication.features.movies.domain.model.MovieModel
import com.example.myapplication.features.movies.domain.usercases.GetMoviesUseCase
import com.google.protobuf.ByteString
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

class MoviesViewModel(val useCase: GetMoviesUseCase,
                      val repository: MovieRepository): ViewModel() {
    sealed class MoviesUiState{
        object Init : MoviesUiState()
        object Loading : MoviesUiState()
        class Error(val message: String) : MoviesUiState()
        class Success(val movies: List<MovieModel>) : MoviesUiState()
    }

    private val _state = MutableStateFlow<MoviesUiState>(MoviesUiState.Init)
    val state : StateFlow<MoviesUiState> = _state.asStateFlow()

    init {
        observeLocalMovies()
    }

    private fun observeLocalMovies() {
        viewModelScope.launch {
            val logData = LogApi.LogData.newBuilder()
                .setAndroidId(ByteString.copyFromUtf8("abc123"))
                .setAppInstanceId(ByteString.copyFromUtf8("instance_001"))
                .setLogLevel(LogApi.ELogLevel.LEVEL_ERROR)
                .setMessage("Something went wrong")
                .setStackTrace("Stacktrace here...")
                .setServerTimeStamp(System.currentTimeMillis())
                .setMobileTimeStamp(System.currentTimeMillis())
                .setVersionCode(123)
                .setUserId("user_42")
                .build()
            val request = LogApi.LogRequest.newBuilder()
                .addLogs(logData)
                .build()
                val result = LogsRemoteDataSource(
                    "10.0.2.2",
                    port = 9090
                ).send(request)
                println(result)

//            repository.getMoviesFromDb().collect { movies ->
//                if (movies.isNotEmpty()) {
//                    _state.value = MoviesUiState.Success(movies)
//                }
//            }
        }
    }

    fun fetchMovies() {
        viewModelScope.launch(Dispatchers.IO) {
            _state.value = MoviesUiState.Loading
            val result = useCase.invoke()

            result.fold(
                onSuccess = { list ->
                    _state.value = MoviesUiState.Success(list)
                            },
                onFailure = { err ->
                    _state.value = MoviesUiState.Error(err.message ?: "Error desconocido")
                }
            )
        }
    }

    fun toggleFavourite(movieId: Int, currentFavouriteState: Boolean) {
        viewModelScope.launch(Dispatchers.IO) {
            repository.toggleFavourite(movieId, !currentFavouriteState)
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/notification/data/service/FirebaseService.kt
================================================
package com.example.myapplication.features.notification.data.service

import android.util.Log
import com.google.firebase.messaging.FirebaseMessagingService
import com.google.firebase.messaging.RemoteMessage

class FirebaseService: FirebaseMessagingService() {
    companion object {
        val TAG = FirebaseService::class.java.simpleName
    }

    //    override fun onNewToken(token: String) {
//        Log.d(TAG, "Refreshed token: $token")
//
//        // If you want to send messages to this application instance or
//        // manage this apps subscriptions on the server side, send the
//        // FCM registration token to your app server.
//        sendRegistrationToServer(token)
//    }


    override fun onMessageReceived(remoteMessage: RemoteMessage) { // ...
        // TODO(developer): Handle FCM messages here.
        // Not getting messages here? See why this may be: https://goo.gl/39bRNJ
        Log.d(TAG, "From: " + remoteMessage.from)
        // Check if message contains a data payload.
        if (remoteMessage.data.size > 0) {
            Log.d(TAG, "Message data payload: " + remoteMessage.data)
            if ( /* Check if data needs to be processed by long running job */true) { // For long-running tasks (10 seconds or more) use Firebase Job Dispatcher.
                //scheduleJob()
            } else { // Handle message within 10 seconds
                // handleNow()
            }
        }
        // Check if message contains a notification payload.
        if (remoteMessage.notification != null) {
            Log.d(TAG, "Message Notification Body: " + remoteMessage.notification!!.body)
        }
        // Also if you intend on generating your own notifications as a result of a received FCM
// message, here is where that should be initiated. See sendNotification method below.
    }

}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/data/repository/ProfileRepository.kt
================================================
package com.example.myapplication.features.profile.data.repository

import com.example.myapplication.features.github.domain.model.UrlPath
import com.example.myapplication.features.login.domain.model.Email
import com.example.myapplication.features.profile.domain.model.ProfileModel
import com.example.myapplication.features.profile.domain.model.vo.Cellphone
import com.example.myapplication.features.profile.domain.model.vo.Summary
import com.example.myapplication.features.profile.domain.model.vo.Username
import com.example.myapplication.features.profile.domain.repository.IProfileRepository

class ProfileRepository: IProfileRepository {
    override fun fetchData(): Result<ProfileModel> {
        return Result.success(
            ProfileModel(
                name = Username.create("Homero J. Simpson"),
                email = Email.create("homero.simpson@springfieldmail.com"),
                cellphone = Cellphone("+1 (939) 555â€‘7422"),
                pathUrl = UrlPath("https://imtexpublicidad.mx/wp-content/uploads/2021/04/Como-ser-xitoso-como-Homero-Simpson.jpeg"),
                summary = Summary.create("Ciudadano de Springfield y dedicado inspector de seguridad en la Planta Nuclear.")
            )
        )
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/domain/model/ProfileModel.kt
================================================
package com.example.myapplication.features.profile.domain.model

import com.example.myapplication.features.github.domain.model.UrlPath
import com.example.myapplication.features.login.domain.model.Email
import com.example.myapplication.features.profile.domain.model.vo.Cellphone
import com.example.myapplication.features.profile.domain.model.vo.Summary
import com.example.myapplication.features.profile.domain.model.vo.Username

class ProfileModel (val pathUrl: UrlPath,
                    val name: Username,
                    val email: Email,
                    val cellphone: Cellphone,
                    val summary: Summary
){
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/domain/model/vo/Cellphone.kt
================================================
package com.example.myapplication.features.profile.domain.model.vo

class Cellphone (val value: String) {
    init {

    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/domain/model/vo/Summary.kt
================================================
package com.example.myapplication.features.profile.domain.model.vo

class Summary private constructor(val value: String){
    companion object {
        fun create(raw: String) : Summary{
            //require(raw.isNullOrBlank()) {
            //    "Summary can not be null or blank"
            //}
            val value = raw.trim()
            require(value.isNotEmpty()) {
                "Summary can not be empty"
            }
            return Summary(value)
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/domain/model/vo/Username.kt
================================================
package com.example.myapplication.features.profile.domain.model.vo

@JvmInline
value class Username private constructor(val value: String) {
    companion object {
        fun create(raw: String): Username {
            //require(raw.isNullOrBlank()) {
            //    "Name can not be null or blank"
            //}
            val value = raw.trim()
            require(value.isNotEmpty()) {
                "Name can not be empty"
            }
            return Username(value)
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/domain/repository/IProfileRepository.kt
================================================
package com.example.myapplication.features.profile.domain.repository

import com.example.myapplication.features.profile.domain.model.ProfileModel

interface IProfileRepository {
    fun fetchData(): Result<ProfileModel>
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/domain/usercases/GetProfileUseCase.kt
================================================
package com.example.myapplication.features.profile.domain.usercases

import com.example.myapplication.features.profile.domain.model.ProfileModel
import com.example.myapplication.features.profile.domain.repository.IProfileRepository
import kotlinx.coroutines.delay

class GetProfileUseCase( val repository: IProfileRepository) {
    suspend fun invoke(): Result<ProfileModel> {
        return repository.fetchData()
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/presentation/ProfileScreen.kt
================================================
package com.example.myapplication.features.profile.presentation

import androidx.compose.foundation.border
import androidx.compose.foundation.layout.Arrangement
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.layout.size
import androidx.compose.foundation.shape.CircleShape
import androidx.compose.material3.Button
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.collectAsState
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.draw.clip
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.layout.ContentScale
import androidx.compose.ui.text.style.TextAlign
import androidx.compose.ui.unit.dp
import coil3.compose.AsyncImage
import org.koin.androidx.compose.koinViewModel

@Composable
fun ProfileScreen(
    profileViewModel: ProfileViewModel = koinViewModel()
) {
    val state = profileViewModel.state.collectAsState()
    val timeState = profileViewModel.timeState.collectAsState()

    LaunchedEffect(Unit) {
        profileViewModel.showProfile()
    }

    when(val st = state.value) {
        is ProfileViewModel.ProfileUiState.Error -> Text(st.message)
        ProfileViewModel.ProfileUiState.Init -> Text("")
        ProfileViewModel.ProfileUiState.Loading -> CircularProgressIndicator()
        is ProfileViewModel.ProfileUiState.Success -> {
            Column(
                modifier = Modifier
                    .fillMaxWidth()
                    .padding(16.dp),
                horizontalAlignment = Alignment.CenterHorizontally,
                verticalArrangement = Arrangement.spacedBy(8.dp)
            ) {
                AsyncImage(
                    model = st.profile.pathUrl.value,
                    contentDescription = "Foto de perfil de ${st.profile.name}",
                    modifier = Modifier
                        .size(120.dp)
                        .clip(CircleShape) // Opcional: imagen circular
                        .border(2.dp, Color.Gray, CircleShape),
                    contentScale = ContentScale.Crop
                )

                Text(
                    text = st.profile.name.value,
                    style = MaterialTheme.typography.titleMedium
                )

                Text(
                    text = st.profile.email.value,
                    style = MaterialTheme.typography.bodyMedium
                )

                Text(
                    text = st.profile.cellphone.value,
                    style = MaterialTheme.typography.bodyMedium
                )

                Text(
                    text = st.profile.summary.value,
                    style = MaterialTheme.typography.bodySmall,
                    modifier = Modifier.padding(top = 8.dp),
                    textAlign = TextAlign.Center
                )

                Button(
                    modifier = Modifier.fillMaxWidth(),
                    onClick = { profileViewModel.fetchServerTime() }
                ) {
                    Text("Mostrar hora del servidor")
                }

                when (val tm = timeState.value) {
                    is ProfileViewModel.TimeUiState.Error -> Text(
                        tm.message,
                        color = MaterialTheme.colorScheme.error
                    )
                    ProfileViewModel.TimeUiState.Idle -> {}
                    ProfileViewModel.TimeUiState.Loading -> CircularProgressIndicator()
                    is ProfileViewModel.TimeUiState.Success -> Text(
                        text = "Hora real: ${tm.formattedTime}",
                        style = MaterialTheme.typography.bodyMedium
                    )
                }
            }
        }
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/profile/presentation/ProfileViewModel.kt
================================================
package com.example.myapplication.features.profile.presentation

import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.example.myapplication.features.profile.domain.model.ProfileModel
import com.example.myapplication.features.profile.domain.usercases.GetProfileUseCase
import com.example.myapplication.features.time.domain.usercases.GetServerTimeUseCase
import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.flow.MutableStateFlow
import kotlinx.coroutines.flow.StateFlow
import kotlinx.coroutines.flow.asStateFlow
import kotlinx.coroutines.launch

class ProfileViewModel(
    val profileUseCase: GetProfileUseCase,
    private val serverTimeUseCase: GetServerTimeUseCase
): ViewModel() {
    // UI STATE
    sealed class ProfileUiState {
        object Init: ProfileUiState()
        object Loading: ProfileUiState()
        class Error(val message: String): ProfileUiState()
        class Success(val profile: ProfileModel): ProfileUiState()
    }

    sealed class TimeUiState {
        object Idle: TimeUiState()
        object Loading: TimeUiState()
        class Error(val message: String): TimeUiState()
        class Success(val formattedTime: String): TimeUiState()
    }

    // variable mutable y observable
    private var _state = MutableStateFlow<ProfileUiState>(ProfileUiState.Init)
    val state : StateFlow<ProfileUiState> = _state.asStateFlow()

    private var _timeState = MutableStateFlow<TimeUiState>(TimeUiState.Idle)
    val timeState: StateFlow<TimeUiState> = _timeState.asStateFlow()

    // evento o eventos desencadenadores
    fun showProfile() {
        viewModelScope.launch(Dispatchers.IO) {
            _state.value = ProfileUiState.Loading
            val resultProfile = profileUseCase.invoke()
            resultProfile.fold(
                onSuccess = {
                    _state.value = ProfileUiState.Success(it)
                },
                onFailure = {
                    _state.value = ProfileUiState.Error(it.message.toString())
                }
            )
        }
    }

    fun fetchServerTime() {
        viewModelScope.launch(Dispatchers.IO) {
            _timeState.value = TimeUiState.Loading
            val resultTime = serverTimeUseCase.invoke()
            resultTime.fold(
                onSuccess = {
                    _timeState.value = TimeUiState.Success(it.format())
                },
                onFailure = {
                    _timeState.value = TimeUiState.Error(it.message ?: "No se pudo obtener la hora")
                }
            )
        }
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/sessionDataStore/data/LoginDataStore.kt
================================================
package com.example.myapplication.features.sessionDataStore.data

import android.content.Context
import androidx.datastore.preferences.core.edit
import androidx.datastore.preferences.core.stringPreferencesKey
import androidx.datastore.preferences.preferencesDataStore
import kotlinx.coroutines.flow.first

val Context.dataStore by preferencesDataStore(name = "user_preferences")
class LoginDataStore(private val context: Context) {
    companion object {
        val USER_NAME = stringPreferencesKey("user_name")
        val TOKEN = stringPreferencesKey("token")
    }

    suspend fun saveUserName(userName: String) {
        context.dataStore.edit {
                preferences -> preferences[USER_NAME] = userName
        }
    }

    suspend fun getUserName(): Result<String> {
        val preferences = context.dataStore.data.first()
        return if (preferences[USER_NAME] != null) {
            Result.success(preferences[USER_NAME]!!)
        } else {
            Result.failure(Exception("User name not found"))
        }
    }

}


================================================
FILE: app/src/main/java/com/example/myapplication/features/sessionDataStore/domain/repository/ILoginDataStore.kt
================================================
package com.example.myapplication.features.sessionDataStore.domain.repository

interface ILoginDataStore {

}


================================================
FILE: app/src/main/java/com/example/myapplication/features/sessionDataStore/domain/usecases/GetTokenUseCase.kt
================================================
package com.example.myapplication.features.sessionDataStore.domain.usecases

class GetTokenUseCase {

}


================================================
FILE: app/src/main/java/com/example/myapplication/features/time/data/datasource/MockServerTimeDataSource.kt
================================================
package com.example.myapplication.features.time.data.datasource

import android.os.SystemClock

/**
 * Simula una API remota que entrega la hora real del servidor.
 * Se apoya en elapsedRealtime para que cambios manuales en la fecha del dispositivo
 * no alteren el reloj que devolvemos a la UI.
 */
class MockServerTimeDataSource(
    private val seedEpochMillis: Long = System.currentTimeMillis(),
    private val bootReference: Long = SystemClock.elapsedRealtime()
) : ServerTimeDataSource {

    override suspend fun fetchCurrentEpochMillis(): Long {
        val elapsedSinceSeed = SystemClock.elapsedRealtime() - bootReference
        return seedEpochMillis + elapsedSinceSeed
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/data/datasource/PersistentMockServerTimeDataSource.kt
================================================
package com.example.myapplication.features.time.data.datasource

import android.os.SystemClock
import com.example.myapplication.features.time.data.local.ServerTimeLocalStore
import com.example.myapplication.features.time.data.local.ServerTimeReference
import kotlin.math.max

/**
 * Fuente mock que:
 * 1) Usa una hora fija definida en cÐ“Ñ–digo como "hora real" del servidor.
 * 2) Hace avanzar el reloj con elapsedRealtime (no depende de la hora del sistema).
 * 3) Persiste la referencia para sobrevivir reinicios sin internet.
 */
class PersistentMockServerTimeDataSource(
    private val localStore: ServerTimeLocalStore,
    private val manualSeedEpochMillis: Long
) : ServerTimeDataSource {

    override suspend fun fetchCurrentEpochMillis(): Long {
        val nowElapsed = SystemClock.elapsedRealtime()
        val nowWallClock = System.currentTimeMillis()

        // Cargar referencia guardada o inicializar con la hora fija configurada.
        val storedRef = localStore.getReference() ?: ServerTimeReference(
            referenceEpochMillis = manualSeedEpochMillis,
            referenceElapsedMillis = nowElapsed,
            referenceWallClockMillis = nowWallClock
        ).also { localStore.save(it) }

        val deltaElapsed = nowElapsed - storedRef.referenceElapsedMillis
        val delta = if (deltaElapsed >= 0) {
            // Mismo boot: usar reloj monÐ“Ñ–tono.
            deltaElapsed
        } else {
            // Boot nuevo: estimar con wall clock (clamp para evitar retroceso por cambios manuales).
            max(0, nowWallClock - storedRef.referenceWallClockMillis)
        }
        val currentEpoch = storedRef.referenceEpochMillis + delta

        // Guardar la nueva referencia para que continÐ“Ñ”e avanzando en siguientes lecturas y reinicios.
        localStore.save(
            ServerTimeReference(
                referenceEpochMillis = currentEpoch,
                referenceElapsedMillis = nowElapsed,
                referenceWallClockMillis = nowWallClock
            )
        )

        return currentEpoch
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/data/datasource/ServerTimeDataSource.kt
================================================
package com.example.myapplication.features.time.data.datasource

/**
 * Fuente de datos que expone la hora real desde un backend.
 */
interface ServerTimeDataSource {
    suspend fun fetchCurrentEpochMillis(): Long
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/data/local/ServerTimeLocalStore.kt
================================================
package com.example.myapplication.features.time.data.local

import android.content.Context
import androidx.datastore.preferences.core.PreferenceDataStoreFactory
import androidx.datastore.preferences.core.edit
import androidx.datastore.preferences.core.longPreferencesKey
import androidx.datastore.preferences.preferencesDataStoreFile
import kotlinx.coroutines.flow.first

data class ServerTimeReference(
    val referenceEpochMillis: Long,
    val referenceElapsedMillis: Long,
    val referenceWallClockMillis: Long
)

class ServerTimeLocalStore(
    context: Context
) {
    private val dataStore = PreferenceDataStoreFactory.create(
        produceFile = { context.preferencesDataStoreFile("server_time.preferences_pb") }
    )

    private val epochKey = longPreferencesKey("epoch_at_reference")
    private val elapsedKey = longPreferencesKey("elapsed_at_reference")
    private val wallClockKey = longPreferencesKey("wallclock_at_reference")

    suspend fun getReference(): ServerTimeReference? {
        val preferences = dataStore.data.first()
        val epoch = preferences[epochKey] ?: return null
        val elapsed = preferences[elapsedKey] ?: return null
        val wallClock = preferences[wallClockKey] ?: return null
        return ServerTimeReference(epoch, elapsed, wallClock)
    }

    suspend fun save(reference: ServerTimeReference) {
        dataStore.edit { prefs ->
            prefs[epochKey] = reference.referenceEpochMillis
            prefs[elapsedKey] = reference.referenceElapsedMillis
            prefs[wallClockKey] = reference.referenceWallClockMillis
        }
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/data/repository/ServerTimeRepository.kt
================================================
package com.example.myapplication.features.time.data.repository

import com.example.myapplication.features.time.data.datasource.ServerTimeDataSource
import com.example.myapplication.features.time.domain.model.ServerTime
import com.example.myapplication.features.time.domain.repository.ITimeRepository

class ServerTimeRepository(
    private val dataSource: ServerTimeDataSource
) : ITimeRepository {
    override suspend fun getCurrentTime(): Result<ServerTime> = runCatching {
        val epochMillis = dataSource.fetchCurrentEpochMillis()
        ServerTime(epochMillis)
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/domain/model/ManualServerTimeConfig.kt
================================================
package com.example.myapplication.features.time.domain.model

/**
 * Cambia este valor para simular la hora "real" entregada por el backend.
 * Ejemplo: 2024-12-31T00:00:00Z = 1735689600000L.
 */
object ManualServerTimeConfig {
    const val FIXED_SERVER_EPOCH_MILLIS = 1735689600000L
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/domain/model/ServerTime.kt
================================================
package com.example.myapplication.features.time.domain.model

import java.text.SimpleDateFormat
import java.util.Date
import java.util.Locale

data class ServerTime(val epochMillis: Long) {
    fun format(pattern: String = "HH:mm:ss"): String {
        val formatter = SimpleDateFormat(pattern, Locale.getDefault())
        return formatter.format(Date(epochMillis))
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/domain/repository/ITimeRepository.kt
================================================
package com.example.myapplication.features.time.domain.repository

import com.example.myapplication.features.time.domain.model.ServerTime

interface ITimeRepository {
    suspend fun getCurrentTime(): Result<ServerTime>
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/time/domain/usercases/GetServerTimeUseCase.kt
================================================
package com.example.myapplication.features.time.domain.usercases

import com.example.myapplication.features.time.domain.model.ServerTime
import com.example.myapplication.features.time.domain.repository.ITimeRepository

class GetServerTimeUseCase(private val repository: ITimeRepository) {
    suspend fun invoke(): Result<ServerTime> {
        return repository.getCurrentTime()
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/features/webview/presentation/AtuladoScreen.kt
================================================
package com.example.myapplication.features.webview.presentation

import android.annotation.SuppressLint
import android.graphics.Bitmap
import android.view.ViewGroup
import android.webkit.WebResourceError
import android.webkit.WebResourceRequest
import android.webkit.WebSettings
import android.webkit.WebView
import android.webkit.WebViewClient
import androidx.activity.compose.BackHandler
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.fillMaxSize
import androidx.compose.foundation.layout.padding
import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.ArrowBack
import androidx.compose.material3.AlertDialog
import androidx.compose.material3.Button
import androidx.compose.material3.CenterAlignedTopAppBar
import androidx.compose.material3.CircularProgressIndicator
import androidx.compose.material3.ExperimentalMaterial3Api
import androidx.compose.material3.IconButton
import androidx.compose.material3.Scaffold
import androidx.compose.material3.Text
import androidx.compose.material3.TextButton
import androidx.compose.runtime.Composable
import androidx.compose.runtime.DisposableEffect
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.runtime.getValue
import androidx.compose.runtime.mutableStateOf
import androidx.compose.runtime.remember
import androidx.compose.runtime.setValue
import androidx.compose.ui.Alignment
import androidx.compose.ui.Modifier
import androidx.compose.ui.viewinterop.AndroidView
import kotlinx.coroutines.delay
import java.nio.charset.StandardCharsets

@OptIn(ExperimentalMaterial3Api::class)
@SuppressLint("SetJavaScriptEnabled")
@Composable
fun AtuladoScreen(
    url: String,
    postData: String?,
    shouldStopBrowsing: (String?) -> Boolean,
    modifier: Modifier
) {
    val webView = remember { mutableStateOf<WebView?>(null) }
    var canGoBack by remember { mutableStateOf(false) }
    var navigateBack by remember { mutableStateOf(false) }

    // Control del timeout
    var isLoading by remember { mutableStateOf(true) }
    var hasTimedOut by remember { mutableStateOf(false) }
    var showTimeoutDialog by remember { mutableStateOf(false) }
    var loadStartTime by remember { mutableStateOf(0L) }

    LaunchedEffect(isLoading, loadStartTime) {
        if (isLoading && loadStartTime > 0) {
            delay(15000) // 5 segundos
            if (isLoading) {
                hasTimedOut = true
                showTimeoutDialog = true
                webView.value?.stopLoading()
            }
        }
    }

    // boton de retroceso
    BackHandler(enabled = true) {
    }

    LaunchedEffect(navigateBack) {
        if (navigateBack) {
            val currentWebView = webView.value
            if (currentWebView != null && currentWebView.canGoBack()) {
                currentWebView.goBack()
            }
        }
        navigateBack = false
    }

    // limmpiar el WebView cuando se destruya el composable
    DisposableEffect(Unit) {
        onDispose {
            webView.value?.destroy()
        }
    }

    Scaffold(
        content = { paddingValues ->
            Box(
                modifier = modifier
                    .fillMaxSize()
                    .padding(paddingValues)
            ) {
                AndroidView(
                    modifier = Modifier.fillMaxSize(),
                    factory = { context ->
                        WebView(context).apply {
                            layoutParams = ViewGroup.LayoutParams(
                                ViewGroup.LayoutParams.MATCH_PARENT,
                                ViewGroup.LayoutParams.WRAP_CONTENT
                            )

                            settings.apply {
                                loadWithOverviewMode = true
                                isFocusable = true
                                isFocusableInTouchMode = true
                                useWideViewPort = true
                                javaScriptEnabled = true
                                cacheMode = WebSettings.LOAD_NO_CACHE
                            }

                            webViewClient = object : WebViewClient() {
                                override fun onPageStarted(
                                    view: WebView,
                                    url: String?,
                                    favicon: Bitmap?
                                ) {
                                    view.settings.setSupportZoom(false)
                                    isLoading = true
                                    hasTimedOut = false
                                    loadStartTime = System.currentTimeMillis()
                                }

                                override fun onReceivedError(
                                    view: WebView?,
                                    request: WebResourceRequest?,
                                    error: WebResourceError?,
                                ) {
                                    super.onReceivedError(view, request, error)
                                    isLoading = false
                                    println("onReceivedError: ${error?.description}")
                                }

                                override fun onPageFinished(view: WebView?, url: String?) {
                                    super.onPageFinished(view, url)

                                    if (!hasTimedOut) {
                                        isLoading = false
                                    }

                                    canGoBack = view?.canGoBack() == true
                                    println("onPageFinished: $url")
                                }

                                override fun shouldOverrideUrlLoading(
                                    view: WebView?,
                                    request: WebResourceRequest?,
                                ): Boolean {
                                    return if (shouldStopBrowsing(request?.url.toString())) true
                                    else super.shouldOverrideUrlLoading(view, request)
                                }

                                override fun doUpdateVisitedHistory(
                                    view: WebView?,
                                    url: String?,
                                    isReload: Boolean
                                ) {
                                    super.doUpdateVisitedHistory(view, url, isReload)
                                    canGoBack = view?.canGoBack() == true
                                }
                            }

                            if (postData != null) {
                                postUrl(url, postData.toByteArray(StandardCharsets.UTF_8))
                            } else {
                                loadUrl(url)
                            }
                            webView.value = this
                        }
                    },
                )

                // indicador de carga
                if (isLoading && !hasTimedOut) {
                    CircularProgressIndicator(
                        modifier = Modifier.align(Alignment.Center)
                    )
                }

                // Dialog de timeout
                if (showTimeoutDialog) {
                    AlertDialog(
                        onDismissRequest = { showTimeoutDialog = false },
                        title = {
                            Text("Tiempo de espera agotado")
                        },
                        text = {
                            Text("La pÃ¡gina estÃ¡ tardando demasiado en cargar. Â¿Deseas reintentar?")
                        },
                        confirmButton = {
                            Button(
                                onClick = {
                                    showTimeoutDialog = false
                                    hasTimedOut = false
                                    isLoading = true
                                    loadStartTime = System.currentTimeMillis()
                                    webView.value?.reload()
                                }
                            ) {
                                Text("Reintentar")
                            }
                        },
                        dismissButton = {
                            TextButton(
                                onClick = {
                                    showTimeoutDialog = false
                                    // implementar navegacion hacia atras
                                }
                            ) {
                                Text("Cancelar")
                            }
                        }
                    )
                }
            }
        }
    )
}


================================================
FILE: app/src/main/java/com/example/myapplication/myiconpack/Accessibility.kt
================================================
package com.example.myapplication.myiconpack

import androidx.compose.foundation.Image
import androidx.compose.foundation.layout.Box
import androidx.compose.foundation.layout.padding
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.graphics.Color
import androidx.compose.ui.graphics.PathFillType.Companion.EvenOdd
import androidx.compose.ui.graphics.SolidColor
import androidx.compose.ui.graphics.StrokeCap.Companion.Butt
import androidx.compose.ui.graphics.StrokeJoin.Companion.Miter
import androidx.compose.ui.graphics.vector.ImageVector
import androidx.compose.ui.graphics.vector.ImageVector.Builder
import androidx.compose.ui.graphics.vector.path
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import com.example.myapplication.MyIconPack
import kotlin.Unit

public val MyIconPack.Accessibility: ImageVector
    get() {
        if (_accessibility != null) {
            return _accessibility!!
        }
        _accessibility = Builder(name = "Accessibility", defaultWidth = 800.0.dp, defaultHeight =
                800.0.dp, viewportWidth = 16.0f, viewportHeight = 16.0f).apply {
            path(fill = SolidColor(Color(0xFF000000)), stroke = null, strokeLineWidth = 0.0f,
                    strokeLineCap = Butt, strokeLineJoin = Miter, strokeLineMiter = 4.0f,
                    pathFillType = EvenOdd) {
                moveTo(16.0f, 8.0f)
                curveTo(16.0f, 12.418f, 12.418f, 16.0f, 8.0f, 16.0f)
                curveTo(3.582f, 16.0f, 0.0f, 12.418f, 0.0f, 8.0f)
                curveTo(0.0f, 3.582f, 3.582f, 0.0f, 8.0f, 0.0f)
                curveTo(12.418f, 0.0f, 16.0f, 3.582f, 16.0f, 8.0f)
                close()
                moveTo(9.25f, 3.75f)
                curveTo(9.25f, 4.44f, 8.69f, 5.0f, 8.0f, 5.0f)
                curveTo(7.31f, 5.0f, 6.75f, 4.44f, 6.75f, 3.75f)
                curveTo(6.75f, 3.06f, 7.31f, 2.5f, 8.0f, 2.5f)
                curveTo(8.69f, 2.5f, 9.25f, 3.06f, 9.25f, 3.75f)
                close()
                moveTo(12.0f, 8.0f)
                horizontalLineTo(9.419f)
                lineTo(11.205f, 13.0f)
                horizontalLineTo(9.081f)
                lineTo(8.0f, 9.973f)
                lineTo(6.919f, 13.0f)
                horizontalLineTo(4.795f)
                lineTo(6.581f, 8.0f)
                horizontalLineTo(4.0f)
                verticalLineTo(6.0f)
                horizontalLineTo(12.0f)
                verticalLineTo(8.0f)
                close()
            }
        }
        .build()
        return _accessibility!!
    }

private var _accessibility: ImageVector? = null

@Preview
@Composable
private fun Preview(): Unit {
    Box(modifier = Modifier.padding(12.dp)) {
        Image(imageVector = MyIconPack.Accessibility, contentDescription = "")
    }
}



================================================
FILE: app/src/main/java/com/example/myapplication/navigation/AppNavigation.kt
================================================
package com.example.myapplication.navigation

import androidx.compose.animation.EnterTransition
import androidx.compose.animation.ExitTransition
import androidx.compose.foundation.layout.padding
import androidx.compose.runtime.Composable
import androidx.compose.runtime.LaunchedEffect
import androidx.compose.ui.Modifier
import androidx.navigation.NavController
import androidx.navigation.NavHost
import androidx.navigation.NavHostController
import androidx.navigation.NavType
import androidx.navigation.compose.NavHost
import androidx.navigation.compose.composable
import com.example.myapplication.features.webview.presentation.AtuladoScreen
import androidx.navigation.compose.rememberNavController
import com.example.myapplication.features.dollar.presentation.DollarScreen
import com.example.myapplication.features.github.presentation.GithubScreen
import com.example.myapplication.features.login.presentation.LogInPage
import com.example.myapplication.features.movies.presentation.MoviesScreen
import com.example.myapplication.features.profile.presentation.ProfileScreen
import androidx.navigation.compose.NavHost
import androidx.navigation.navArgument
import com.example.myapplication.features.movies.domain.model.MovieModel
import com.example.myapplication.features.movies.presentation.MovieDetailScreen
import kotlinx.serialization.json.Json
import java.net.URLDecoder
import java.net.URLEncoder
import kotlinx.serialization.encodeToString

@Composable
fun AppNavigation(navigationViewModel: NavigationViewModel ,
                  modifier: Modifier,
                  navController: NavHostController){

    // Manejar navegaciÃ³n desde el ViewModel
    LaunchedEffect (Unit) {
        navigationViewModel.navigationCommand.collect { command ->
            when (command) {
                is NavigationViewModel.NavigationCommand.NavigateTo -> {
                    navController.navigate(command.route) {
                        // ConfiguraciÃ³n del back stack segÃºn sea necesario
                        when (command.options) {
                            NavigationOptions.CLEAR_BACK_STACK -> {
                                popUpTo(0) // Limpiartodo el back stack
                            }
                            NavigationOptions.REPLACE_HOME -> {
                                popUpTo(Screen.Dollar.route) { inclusive = true }
                            }
                            else -> {
                                // NavegaciÃ³n normal
                            }
                        }
                    }
                }
                is NavigationViewModel.NavigationCommand.PopBackStack -> {
                    navController.popBackStack()
                }
            }
        }
    }

    NavHost(
        navController = navController,
        startDestination = Screen.Atulado.route,
        modifier = modifier
    ){
        composable(Screen.Dollar.route) {
            DollarScreen(navController)
        }

        composable(Screen.GithubScreen.route) {
            GithubScreen(modifier = Modifier.padding())
        }

        composable(Screen.MoviesScreen.route){
            MoviesScreen(navigateToDetail = { movie ->
                // Serializar el objeto Movie a JSON
                val movieJson = Json.encodeToString(movie)
                // Codificar el JSON para que sea seguro en URL
                val encodedMovieJson = URLEncoder.encode(movieJson, "UTF-8")

                // Navegar pasando el JSON codificado como parÃ¡metro
                navController.navigate(
                    "${Screen.MovieDetail.route}/${encodedMovieJson}"
                )
            })
        }

        composable(
            route = "${Screen.MovieDetail.route}/{movie}",
            arguments = listOf(
                navArgument("movie") { type = NavType.StringType }
            )
        ) { backStackEntry ->
            // Obtener el JSON codificado desde los argumentos
            val movieJson = backStackEntry.arguments?.getString("movie") ?: ""
            // Decodificar el JSON
            val movieDecoded = URLDecoder.decode(movieJson, "UTF-8")
            // Deserializar el JSON de vuelta a objeto MovieModel
            val movie = Json.decodeFromString<MovieModel>(movieDecoded)

            MovieDetailScreen(
                movie = movie,
                back = {
                    navController.popBackStack()
                }
            )
        }


        composable(Screen.Profile.route){
            ProfileScreen()
        }

        composable(Screen.LogInPage.route){
            LogInPage(
                onSuccess = {
                    navController.navigate(Screen.GithubScreen.route)
                }
            )
        }

        composable(
            Screen.Atulado.route
        ) {
            AtuladoScreen(
                "https://www.bisa.com/atulado",
                postData = null,
                modifier = modifier,
                shouldStopBrowsing = { true }
            )
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/navigation/NavigationDrawer.kt
================================================
package com.example.myapplication.navigation

import androidx.compose.material.icons.Icons
import androidx.compose.material.icons.filled.DateRange
import androidx.compose.material.icons.filled.Favorite
import androidx.compose.material.icons.filled.Home
import androidx.compose.material.icons.filled.ShoppingCart
import androidx.compose.material.icons.outlined.DateRange
import androidx.compose.material.icons.outlined.FavoriteBorder
import androidx.compose.material.icons.outlined.Home
import androidx.compose.material.icons.outlined.ShoppingCart
import androidx.compose.ui.graphics.vector.ImageVector

sealed class NavigationDrawer(
    val label: String,
    val selectedIcon: ImageVector,
    val unselectedIcon: ImageVector,
    val route: String
) {
    data object Profile : NavigationDrawer(
        "Profile",
        Icons.Filled.Home,
        Icons.Outlined.Home,
        Screen.Profile.route)
    data object Dollar : NavigationDrawer(
        "Dollar",
        Icons.Filled.ShoppingCart,
        Icons.Outlined.ShoppingCart,
        Screen.Dollar.route)
    data object Github : NavigationDrawer(
        "Github",
        Icons.Filled.Favorite,
        Icons.Outlined.FavoriteBorder,
        Screen.GithubScreen.route)
    data object Movie : NavigationDrawer(
        "Movie",
        Icons.Filled.DateRange,
        Icons.Outlined.DateRange,
        Screen.MoviesScreen.route)
}


================================================
FILE: app/src/main/java/com/example/myapplication/navigation/NavigationViewModel.kt
================================================
package com.example.myapplication.navigation

import android.util.Log
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import kotlinx.coroutines.flow.MutableSharedFlow
import kotlinx.coroutines.flow.asSharedFlow
import kotlinx.coroutines.launch

enum class NavigationOptions {
    DEFAULT,
    CLEAR_BACK_STACK,
    REPLACE_HOME
}

class NavigationViewModel: ViewModel() {
    sealed class NavigationCommand {
        data class NavigateTo(val route: String, val options: NavigationOptions = NavigationOptions.DEFAULT) : NavigationCommand()
        object PopBackStack : NavigationCommand()
    }
    private val _navigationCommand = MutableSharedFlow<NavigationCommand>()
    val navigationCommand = _navigationCommand.asSharedFlow()

    fun navigateTo(route: String, options: NavigationOptions = NavigationOptions.DEFAULT) {
        viewModelScope.launch {
            _navigationCommand.emit(NavigationCommand.NavigateTo(route, options))
        }
    }

    fun popBackStack() {
        viewModelScope.launch {
            _navigationCommand.emit(NavigationCommand.PopBackStack)
        }
    }

    fun handleDeepLink(intent: android.content.Intent?) {
        viewModelScope.launch {
            try {
                // DEBUG: Log el intent recibido
                Log.d("NavigationViewModel", "Intent recibido: ${intent?.extras?.keySet()}")

                intent?.extras?.keySet()?.forEach { key ->
                    Log.d("NavigationViewModel", "Extra: $key = ${intent.getStringExtra(key)}")
                }

                when {
                    intent?.hasExtra("navigateTo") == true -> {
                        val destination = intent.getStringExtra("navigateTo")
                        Log.d("NavigationViewModel", "Procesando navigateTo: $destination")
                        handleNavigationDestination(destination)
                    }
                    intent?.action == android.content.Intent.ACTION_VIEW -> {
                        Log.d("NavigationViewModel", "Procesando ACTION_VIEW: ${intent.data}")
                        handleUriDeepLink(intent.data)
                    }
                    intent?.hasExtra("click_action") == true -> {
                        val clickAction = intent.getStringExtra("click_action")
                        Log.d("NavigationViewModel", "Procesando click_action: $clickAction")
                        handleClickAction(clickAction)
                    }
                    else -> {
                        Log.d("NavigationViewModel", "NavegaciÃ³n por defecto a Dollar")
                        navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
                    }
                }
            } catch (e: Exception) {
                Log.e("NavigationViewModel", "Error en handleDeepLink", e)
                navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
            }
        }
    }

    private fun handleClickAction(clickAction: String?) {
        when (clickAction) {
            "OPEN_PROFILE" -> navigateTo(Screen.Profile.route, NavigationOptions.REPLACE_HOME)
            "OPEN_MOVIES" -> navigateTo(Screen.MoviesScreen.route, NavigationOptions.REPLACE_HOME)
            "OPEN_DOLLAR" -> navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
            else -> navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
        }
    }

    private fun handleUriDeepLink(uri: android.net.Uri?) {
        when (uri?.host) {
            "profile" -> {
                navigateTo(Screen.Profile.route, NavigationOptions.REPLACE_HOME)
            }
            "movies" -> {
                navigateTo(Screen.MoviesScreen.route, NavigationOptions.REPLACE_HOME)
            }
            "dollar" -> {
                navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
            }
            "github" -> {
                navigateTo(Screen.GithubScreen.route, NavigationOptions.REPLACE_HOME)
            }
            //"card" -> {
            //    navigateTo(Screen.CardExamples.route, NavigationOptions.REPLACE_HOME)
            //}
            else -> {
                navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
            }
        }
    }

    private fun handleNavigationDestination(destination: String?) {
        when (destination?.uppercase()) {
            "PROFILE" -> navigateTo(Screen.Profile.route, NavigationOptions.REPLACE_HOME)
            "MOVIES" -> navigateTo(Screen.MoviesScreen.route, NavigationOptions.REPLACE_HOME)
            "DOLLAR" -> navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
            "GITHUB" -> navigateTo(Screen.GithubScreen.route, NavigationOptions.REPLACE_HOME)
            //"CARD" -> navigateTo(Screen.CardExamples.route, NavigationOptions.REPLACE_HOME)
            //"HOME" -> navigateTo(Screen.Home.route, NavigationOptions.REPLACE_HOME)
            else -> navigateTo(Screen.Dollar.route, NavigationOptions.CLEAR_BACK_STACK)
        }
    }
}


================================================
FILE: app/src/main/java/com/example/myapplication/navigation/Screen.kt
================================================
package com.example.myapplication.navigation

sealed class Screen(val route: String) {
    object LogInPage : Screen("login")
    object GithubScreen : Screen("github")
    object MoviesScreen : Screen("movies")
    object Dollar: Screen("dollar")
    object Profile: Screen("profile")
    object MovieDetail: Screen("movieDetail")
    object Atulado: Screen("atulado")
}


================================================
FILE: app/src/main/java/com/example/myapplication/ui/theme/Color.kt
================================================
package com.example.myapplication.ui.theme

import androidx.compose.ui.graphics.Color

val Purple80 = Color(0xFFD0BCFF)
val PurpleGrey80 = Color(0xFFCCC2DC)
val Pink80 = Color(0xFFEFB8C8)

val Purple40 = Color(0xFF6650a4)
val PurpleGrey40 = Color(0xFF625b71)
val Pink40 = Color(0xFF7D5260)


================================================
FILE: app/src/main/java/com/example/myapplication/ui/theme/Theme.kt
================================================
package com.example.myapplication.ui.theme

import android.app.Activity
import android.os.Build
import androidx.compose.foundation.isSystemInDarkTheme
import androidx.compose.material3.MaterialTheme
import androidx.compose.material3.darkColorScheme
import androidx.compose.material3.dynamicDarkColorScheme
import androidx.compose.material3.dynamicLightColorScheme
import androidx.compose.material3.lightColorScheme
import androidx.compose.runtime.Composable
import androidx.compose.ui.platform.LocalContext

private val DarkColorScheme = darkColorScheme(
    primary = Purple80,
    secondary = PurpleGrey80,
    tertiary = Pink80
)

private val LightColorScheme = lightColorScheme(
    primary = Purple40,
    secondary = PurpleGrey40,
    tertiary = Pink40

    /* Other default colors to override
    background = Color(0xFFFFFBFE),
    surface = Color(0xFFFFFBFE),
    onPrimary = Color.White,
    onSecondary = Color.White,
    onTertiary = Color.White,
    onBackground = Color(0xFF1C1B1F),
    onSurface = Color(0xFF1C1B1F),
    */
)

@Composable
fun MyApplicationTheme(
    darkTheme: Boolean = isSystemInDarkTheme(),
    // Dynamic color is available on Android 12+
    dynamicColor: Boolean = true,
    content: @Composable () -> Unit
) {
    val colorScheme = when {
        dynamicColor && Build.VERSION.SDK_INT >= Build.VERSION_CODES.S -> {
            val context = LocalContext.current
            if (darkTheme) dynamicDarkColorScheme(context) else dynamicLightColorScheme(context)
        }

        darkTheme -> DarkColorScheme
        else -> LightColorScheme
    }

    MaterialTheme(
        colorScheme = colorScheme,
        typography = Typography,
        content = content
    )
}


================================================
FILE: app/src/main/java/com/example/myapplication/ui/theme/Type.kt
================================================
package com.example.myapplication.ui.theme

import androidx.compose.material3.Typography
import androidx.compose.ui.text.TextStyle
import androidx.compose.ui.text.font.FontFamily
import androidx.compose.ui.text.font.FontWeight
import androidx.compose.ui.unit.sp

// Set of Material typography styles to start with
val Typography = Typography(
    bodyLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 16.sp,
        lineHeight = 24.sp,
        letterSpacing = 0.5.sp
    )
    /* Other default text styles to override
    titleLarge = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Normal,
        fontSize = 22.sp,
        lineHeight = 28.sp,
        letterSpacing = 0.sp
    ),
    labelSmall = TextStyle(
        fontFamily = FontFamily.Default,
        fontWeight = FontWeight.Medium,
        fontSize = 11.sp,
        lineHeight = 16.sp,
        letterSpacing = 0.5.sp
    )
    */
)


================================================
FILE: app/src/main/proto/LogApi.proto
================================================
syntax = "proto3";

option java_package = "com.develoop.logs";

service LogService {
   rpc send(LogRequest) returns (LogResponse);
}

message LogRequest {
   repeated LogData logs = 1;
}

message LogData {
   bytes androidId = 1;
   bytes appInstanceId = 2;
   ELogLevel logLevel = 3;
   string message = 4;
   string stackTrace = 5;
   int64 serverTimeStamp = 6;
   int64 mobileTimeStamp = 7;
   int32 versionCode = 8;
   string userId = 9;
}

message LogResponse {
   ELogResultCode resultCode = 1;
}

enum ELogResultCode {
   LOG_RESULT_UNDEFINED = 0;
   LOG_RESULT_ERROR = 1;
   LOG_RESULT_OK = 2;
}

enum ELogLevel {
   LEVEL_UNKNOWN = 0;
   LEVEL_INFO = 1;
   LEVEL_DEBUG = 2;
   LEVEL_TRACE = 3;
   LEVEL_WARN = 4;
   LEVEL_ERROR = 5;
   LEVEL_FATAL = 6;
}


================================================
FILE: app/src/main/res/drawable/ic_launcher_background.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<vector
    android:height="108dp"
    android:width="108dp"
    android:viewportHeight="108"
    android:viewportWidth="108"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#3DDC84"
          android:pathData="M0,0h108v108h-108z"/>
    <path android:fillColor="#00000000" android:pathData="M9,0L9,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,0L19,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M29,0L29,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M39,0L39,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M49,0L49,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M59,0L59,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M69,0L69,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M79,0L79,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M89,0L89,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M99,0L99,108"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,9L108,9"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,19L108,19"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,29L108,29"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,39L108,39"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,49L108,49"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,59L108,59"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,69L108,69"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,79L108,79"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,89L108,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M0,99L108,99"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,29L89,29"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,39L89,39"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,49L89,49"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,59L89,59"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,69L89,69"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M19,79L89,79"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M29,19L29,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M39,19L39,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M49,19L49,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M59,19L59,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M69,19L69,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
    <path android:fillColor="#00000000" android:pathData="M79,19L79,89"
          android:strokeColor="#33FFFFFF" android:strokeWidth="0.8"/>
</vector>



================================================
FILE: app/src/main/res/drawable/ic_launcher_foreground.xml
================================================
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path android:pathData="M31,63.928c0,0 6.4,-11 12.1,-13.1c7.2,-2.6 26,-1.4 26,-1.4l38.1,38.1L107,108.928l-32,-1L31,63.928z">
        <aapt:attr name="android:fillColor">
            <gradient
                android:endX="85.84757"
                android:endY="92.4963"
                android:startX="42.9492"
                android:startY="49.59793"
                android:type="linear">
                <item
                    android:color="#44000000"
                    android:offset="0.0" />
                <item
                    android:color="#00000000"
                    android:offset="1.0" />
            </gradient>
        </aapt:attr>
    </path>
    <path
        android:fillColor="#FFFFFF"
        android:fillType="nonZero"
        android:pathData="M65.3,45.828l3.8,-6.6c0.2,-0.4 0.1,-0.9 -0.3,-1.1c-0.4,-0.2 -0.9,-0.1 -1.1,0.3l-3.9,6.7c-6.3,-2.8 -13.4,-2.8 -19.7,0l-3.9,-6.7c-0.2,-0.4 -0.7,-0.5 -1.1,-0.3C38.8,38.328 38.7,38.828 38.9,39.228l3.8,6.6C36.2,49.428 31.7,56.028 31,63.928h46C76.3,56.028 71.8,49.428 65.3,45.828zM43.4,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2c-0.3,-0.7 -0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C45.3,56.528 44.5,57.328 43.4,57.328L43.4,57.328zM64.6,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2s-0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C66.5,56.528 65.6,57.328 64.6,57.328L64.6,57.328z"
        android:strokeWidth="1"
        android:strokeColor="#00000000" />
</vector>


================================================
FILE: app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background"/>
    <foreground android:drawable="@mipmap/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background"/>
    <foreground android:drawable="@mipmap/ic_launcher_foreground"/>
</adaptive-icon>


================================================
FILE: app/src/main/res/mipmap-hdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-hdpi/ic_launcher_foreground.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-hdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-mdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-mdpi/ic_launcher_foreground.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-mdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xhdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xhdpi/ic_launcher_foreground.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xhdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxhdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxhdpi/ic_launcher_foreground.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxhdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxxhdpi/ic_launcher.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxxhdpi/ic_launcher_foreground.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/mipmap-xxxhdpi/ic_launcher_round.webp
================================================
[Binary file]


================================================
FILE: app/src/main/res/values/colors.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="purple_200">#FFBB86FC</color>
    <color name="purple_500">#FF6200EE</color>
    <color name="purple_700">#FF3700B3</color>
    <color name="teal_200">#FF03DAC5</color>
    <color name="teal_700">#FF018786</color>
    <color name="black">#FF000000</color>
    <color name="white">#FFFFFFFF</color>
</resources>


================================================
FILE: app/src/main/res/values/strings.xml
================================================
<resources>
    <string name="app_name">My Application</string>
    <string name="signin_button">Login</string>>
    <string name="signin_tittle">Login</string>>
    <string name="api_key_movies">fa3e844ce31744388e07fa47c7c5d8c3</string>>
</resources>


================================================
FILE: app/src/main/res/values/themes.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.App.Starting" parent="Theme.SplashScreen">
        <!-- Color de fondo del splash -->
        <item name="windowSplashScreenBackground">@color/black</item>

        <!-- Icono central del splash -->
        <item name="windowSplashScreenAnimatedIcon">@mipmap/ic_launcher_foreground</item>

        <item name="windowSplashScreenIconBackgroundColor">@color/teal_200</item>

        <item name="windowSplashScreenAnimationDuration">1000</item>

        <item name="android:statusBarColor">@color/teal_700</item>
    </style>
    <style name="Theme.MyApplication" parent="android:Theme.Material.Light.NoActionBar" />
</resources>


================================================
FILE: app/src/main/res/xml/backup_rules.xml
================================================
<?xml version="1.0" encoding="utf-8"?><!--
   Sample backup rules file; uncomment and customize as necessary.
   See https://developer.android.com/guide/topics/data/autobackup
   for details.
   Note: This file is ignored for devices older than API 31
   See https://developer.android.com/about/versions/12/backup-restore
-->
<full-backup-content>
    <!--
   <include domain="sharedpref" path="."/>
   <exclude domain="sharedpref" path="device.xml"/>
-->
</full-backup-content>


================================================
FILE: app/src/main/res/xml/data_extraction_rules.xml
================================================
<?xml version="1.0" encoding="utf-8"?><!--
   Sample data extraction rules file; uncomment and customize as necessary.
   See https://developer.android.com/about/versions/12/backup-restore#xml-changes
   for details.
-->
<data-extraction-rules>
    <cloud-backup>
        <!-- TODO: Use <include> and <exclude> to control what is backed up.
        <include .../>
        <exclude .../>
        -->
    </cloud-backup>
    <!--
    <device-transfer>
        <include .../>
        <exclude .../>
    </device-transfer>
    -->
</data-extraction-rules>


================================================
FILE: app/src/main/res/xml/remote_config_defaults.xml
================================================
<?xml version="1.0" encoding="utf-8"?>
<map>
    <key name="maintenance_mode">
        <value>false</value>
    </key>
</map>


================================================
FILE: app/src/test/java/com/example/myapplication/ExampleUnitTest.kt
================================================
package com.example.myapplication

import org.junit.Test

import org.junit.Assert.*

/**
 * Example local unit test, which will execute on the development machine (host).
 *
 * See [testing documentation](http://d.android.com/tools/testing).
 */
class ExampleUnitTest {
    @Test
    fun addition_isCorrect() {
        assertEquals(4, 2 + 2)
    }
}


================================================
FILE: app/src/test/java/com/example/myapplication/features/github/domain/model/UrlPathTest.kt
================================================
package com.example.myapplication.features.github.domain.model

import org.junit.Test

class UrlPathTest {
    @Test(expected = Exception:: class)
    fun `test UrlPath`( ) {
        UrlPath("mydfdsda")
        UrlPath("")
    }
}


================================================
FILE: app/src/test/java/com/example/myapplication/features/github/domain/usercases/FindByNicknameUseCaseTest.kt
================================================
package com.example.myapplication.features.github.domain.usercases

import com.example.myapplication.features.github.domain.model.NickName
import com.example.myapplication.features.github.domain.model.UrlPath
import com.example.myapplication.features.github.domain.model.UserModel
import com.example.myapplication.features.github.domain.repository.IgithubRepository
import io.mockk.coEvery
import kotlinx.coroutines.ExperimentalCoroutinesApi
import kotlinx.coroutines.test.runTest
import io.mockk.mockk
import org.junit.Assert.assertEquals
import org.junit.Test

@OptIn(ExperimentalCoroutinesApi::class)
class FindByNicknameUseCaseTest {
    private val repository = mockk<IgithubRepository>()
    private val useCase = FindByNickNameUseCase(repository)

    @Test
    fun `should return success when repository returns user`() = runTest{
        //arrange
        val expected = UserModel(NickName("juan"), UrlPath("https://test.url"))
        coEvery { repository.findbyNickName("juan") } returns Result.success(expected)

        //act
        val result = useCase.invoke("juan")

        //assert
        assert(result.isSuccess)
        assertEquals(expected, result.getOrNull())
    }

    @Test
    fun `should return failure when repository returns error`() = runTest {
        //arrange
        val exception = Exception("User not found")
        coEvery { repository.findbyNickName("nonexistent") } returns Result.failure(exception)

        //act
        val result = useCase.invoke("nonexistent")

        //assert
        assert(result.isFailure)
        assertEquals(exception, result.exceptionOrNull())
    }
}


================================================
FILE: app/src/test/java/com/example/myapplication/features/login/domain/model/EmailParametirizedTest.kt
================================================
package com.example.myapplication.features.login.domain.model

import org.junit.Assert.assertEquals
import org.junit.Test
import org.junit.runner.RunWith
import org.junit.runners.Parameterized

@RunWith(Parameterized::class)
class EmailParametirizedTest (private val inputData: String, private val expected: String,){
    companion object{
        //arrange
        @JvmStatic
        @Parameterized.Parameters(name = "Email.of({0}) = {1}")
        fun data(): Collection<Array<String>> = listOf(
            arrayOf("USER@DOMAIN.COM", "user@domain.com"),
            arrayOf("USER@a.COM", "user@a.com"),
            arrayOf("Foo.Bar@gmail.com", "foo.bar@gmail.com")
        )
    }

    @Test()
    fun `test input data Email`(){
        //act
        val emailValueObject = Email.create(inputData)

        //assert
        assertEquals(expected, emailValueObject.value)
    }
}


================================================
FILE: app/src/test/java/com/example/myapplication/features/login/domain/model/EmailTest.kt
================================================
package com.example.myapplication.features.login.domain.model

import org.junit.Assert.assertEquals
import org.junit.Test

class EmailTest {
    @Test()
    fun `test input lowercase data Email`(){
        //arrange
        val inputData = "AdrIan@gmail.COM"
        val expected = "adrian@gmail.com"

        //act
        val emailValueObject = Email.create(inputData)

        //assert
        assertEquals(expected, emailValueObject.value)
    }
}


================================================
FILE: app/src/test/java/com/example/myapplication/features/movies/data/database/MigrationTest.kt
================================================
package com.example.myapplication.features.movies.data.database

import android.content.Context
import androidx.room.Room
import androidx.test.core.app.ApplicationProvider
import androidx.test.ext.junit.runners.AndroidJUnit4
import com.example.myapplication.features.dollar.data.database.entity.DollarEntity
import com.example.myapplication.features.movies.data.database.entity.MovieEntity
import kotlinx.coroutines.flow.first
import kotlinx.coroutines.runBlocking
import org.junit.After
import org.junit.Assert.assertEquals
import org.junit.Before
import org.junit.Test
import org.junit.runner.RunWith
import java.io.IOException

@RunWith(AndroidJUnit4::class)
class DatabaseIntegrityTest {
    private lateinit var db: AppRoomDatabase

    @Before
    fun createDb() {
        val context = ApplicationProvider.getApplicationContext<Context>()
        db = Room.inMemoryDatabaseBuilder(
            context,
            AppRoomDatabase::class.java
        ).build()
    }

    @After
    @Throws(IOException::class)
    fun closeDb() {
        db.close()
    }

    @Test
    @Throws(Exception::class)
    fun testInsertAndReadDollar() = runBlocking {
        val dollar = DollarEntity(
            id = 0,
            dollarOfficial = "6.96",
            dollarParalelo = "7.50",
            usdt = "7.00",
            usdc = "7.01",
            timestamp = System.currentTimeMillis()
        )

        db.dollarDao().insert(dollar)
        val dollars = db.dollarDao().getList()

        assertEquals(1, dollars.size)
        assertEquals("6.96", dollars[0].dollarOfficial)
    }

    @Test
    @Throws(Exception::class)
    fun testInsertAndReadMovie() = runBlocking {
        val movie = MovieEntity(
            id = 1,
            title = "Test Movie",
            posterUrl = "http://test.com/poster.jpg",
            overview = "Test overview",
            timestamp = ""
        )

        db.movieDao().insertMovies(listOf(movie))
        val movies = db.movieDao().getAllMovies().first()

        assertEquals(1, movies.size)
        assertEquals("Test Movie", movies[0].title)
    }

    @Test
    @Throws(Exception::class)
    fun testMovieWithTimestamp() = runBlocking {
        val movie = MovieEntity(
            id = 1,
            title = "Test Movie",
            posterUrl = "http://test.com/poster.jpg",
            overview = "Test overview",
            timestamp = "2024-01-01"
        )

        db.movieDao().insertMovies(listOf(movie))
        val movies = db.movieDao().getAllMovies().first()

        assertEquals("2024-01-01", movies[0].timestamp)
    }
}


================================================
FILE: app/src/test/java/com/example/myapplication/features/profile/domain/model/EmailProfileTest.kt
================================================
package com.example.myapplication.features.profile.domain.model

import com.example.myapplication.features.login.domain.model.Email
import org.junit.Assert.assertEquals
import org.junit.Test

class EmailProfileTest {
    @Test()
    fun `test input lowercase data Email`(){
        //arrange
        val inputData = "AdrIan@gmail.COM"
        val expected = "adrian@gmail.com"

        //act
        val emailValueObject = Email.create(inputData)

        //assert
        assertEquals(expected, emailValueObject.value)
    }
}


================================================
FILE: gradle/libs.versions.toml
================================================
[versions]
agp = "8.12.0"
coilCompose = "3.2.0"
coreSplashscreen = "1.0.1"
coreTesting = "2.2.0"
glide = "4.16.0"
koinAndroid = "3.3.0"
koinAndroidxCompose = "3.3.0"
koinAndroidxNavigation = "3.3.0"
kotlin = "2.0.21"
coreKtx = "1.10.1"
kotlinxCoroutinesTest = "1.10.2"
mockk = "1.13.8"
junit = "4.13.2"
junitVersion = "1.1.5"
espressoCore = "3.5.1"
lifecycleRuntimeKtx = "2.6.1"
activityCompose = "1.8.0"
composeBom = "2024.09.00"
navigationCompose = "2.9.3"
retrofit = "3.0.0"
converterGson = "3.0.0"
googleGmsGoogleServices = "4.4.2"
firebaseDatabase = "21.0.0"
firebaseMessaging = "25.0.1"
firebaseRemoteConfig = "22.0.0"
ksp = "2.0.20-1.0.24"
room = "2.8.0"
datastore = "1.0.0"
kotlinx-serialization = "1.7.3"
rules = "1.5.0"
runner = "1.5.2"
junitKtx = "1.3.0"
workRuntimeKtx = "2.9.0"
grpc = "1.67.1"
protobuf = "3.25.1"
protobufPlugin = "0.9.4"
grpcKotlin = "1.4.1"
protoc = "4.26.1"

[libraries]
androidx-core-ktx = { group = "androidx.core", name = "core-ktx", version.ref = "coreKtx" }
androidx-core-splashscreen = { module = "androidx.core:core-splashscreen", version.ref = "coreSplashscreen" }
androidx-core-testing = { module = "androidx.arch.core:core-testing", version.ref = "coreTesting" }
androidx-navigation-compose = { module = "androidx.navigation:navigation-compose", version.ref = "navigationCompose" }
androidx-rules = { module = "androidx.test:rules", version.ref = "rules" }
androidx-runner = { module = "androidx.test:runner", version.ref = "runner" }
androidx-work-runtime-ktx = { module = "androidx.work:work-runtime-ktx", version.ref = "workRuntimeKtx" }
coil-compose = { module = "io.coil-kt.coil3:coil-compose", version.ref = "coilCompose" }
coil-network = { module = "io.coil-kt.coil3:coil-network-okhttp", version.ref = "coilCompose" }
glide = { module = "com.github.bumptech.glide:glide", version.ref = "glide" }
junit = { group = "junit", name = "junit", version.ref = "junit" }
androidx-junit = { group = "androidx.test.ext", name = "junit", version.ref = "junitVersion" }
androidx-espresso-core = { group = "androidx.test.espresso", name = "espresso-core", version.ref = "espressoCore" }
androidx-lifecycle-runtime-ktx = { group = "androidx.lifecycle", name = "lifecycle-runtime-ktx", version.ref = "lifecycleRuntimeKtx" }
androidx-activity-compose = { group = "androidx.activity", name = "activity-compose", version.ref = "activityCompose" }
androidx-compose-bom = { group = "androidx.compose", name = "compose-bom", version.ref = "composeBom" }
androidx-ui = { group = "androidx.compose.ui", name = "ui" }
androidx-ui-graphics = { group = "androidx.compose.ui", name = "ui-graphics" }
androidx-ui-tooling = { group = "androidx.compose.ui", name = "ui-tooling" }
androidx-ui-tooling-preview = { group = "androidx.compose.ui", name = "ui-tooling-preview" }
androidx-ui-test-manifest = { group = "androidx.compose.ui", name = "ui-test-manifest" }
androidx-ui-test-junit4 = { group = "androidx.compose.ui", name = "ui-test-junit4" }
androidx-material3 = { group = "androidx.compose.material3", name = "material3" }
koin-android = { module = "io.insert-koin:koin-android", version.ref = "koinAndroid" }
koin-androidx-compose = { module = "io.insert-koin:koin-androidx-compose", version.ref = "koinAndroidxCompose" }
koin-androidx-navigation = { module = "io.insert-koin:koin-androidx-navigation", version.ref = "koinAndroidxNavigation" }
kotlinx-coroutines-test = { module = "org.jetbrains.kotlinx:kotlinx-coroutines-test", version.ref = "kotlinxCoroutinesTest" }
mockk = { module = "io.mockk:mockk", version.ref = "mockk" }
retrofit = { module = "com.squareup.retrofit2:retrofit", version.ref = "retrofit" }
converter-gson = { module = "com.squareup.retrofit2:converter-gson", version.ref = "converterGson" }
firebase-database = { group = "com.google.firebase", name = "firebase-database", version.ref = "firebaseDatabase" }
firebase-messaging = { group = "com.google.firebase", name = "firebase-messaging", version.ref = "firebaseMessaging" }
firebase-remoteconfig = { group = "com.google.firebase", name = "firebase-config-ktx", version.ref = "firebaseRemoteConfig" }
#room
room-runtime = { group="androidx.room", name="room-runtime", version.ref="room"}
room-compiler = { group="androidx.room", name="room-compiler", version.ref="room"}
room-ktx = { group="androidx.room", name="room-ktx", version.ref="room"}
room-rxjava2 = { group="androidx.room", name="room-rxjava2", version.ref="room"}
room-rxjava3 = { group="androidx.room", name="room-rxjava3", version.ref="room"}
room-guava = { group="androidx.room", name="room-guava", version.ref="room"}
room-testing = { group="androidx.room", name="room-testing", version.ref="room"}
room-paging = { group="androidx.room", name="room-paging", version.ref="room"}
kotlinx-serialization-json = { module = "org.jetbrains.kotlinx:kotlinx-serialization-json", version.ref = "kotlinx-serialization" }

#datastore
datastore = { module = "androidx.datastore:datastore-preferences", version.ref = "datastore" }
androidx-junit-ktx = { group = "androidx.test.ext", name = "junit-ktx", version.ref = "junitKtx" }

grpc-okhttp = { group = "io.grpc", name = "grpc-okhttp", version.ref = "grpc" }
grpc-protobuf-lite = { group = "io.grpc", name = "grpc-protobuf-lite", version.ref = "grpc" }
grpc-kotlin-stub = { group = "io.grpc", name = "grpc-kotlin-stub", version.ref = "grpcKotlin" }
protobuf-kotlin-lite = { group = "com.google.protobuf", name = "protobuf-kotlin-lite", version.ref = "protoc" }
protoc = { group = "com.google.protobuf", name = "protoc", version.ref = "protoc" }
protoc-gen-grpc-java = { group = "io.grpc", name = "protoc-gen-grpc-java", version.ref = "grpc" }
protoc-gen-grpc-kotlin = { group = "io.grpc", name = "protoc-gen-grpc-kotlin", version.ref = "grpcKotlin" }



[plugins]
android-application = { id = "com.android.application", version.ref = "agp" }
kotlin-android = { id = "org.jetbrains.kotlin.android", version.ref = "kotlin" }
kotlin-compose = { id = "org.jetbrains.kotlin.plugin.compose", version.ref = "kotlin" }
google-gms-google-services = { id = "com.google.gms.google-services", version.ref = "googleGmsGoogleServices" }
ksp = { id = "com.google.devtools.ksp", version.ref="ksp"}
kotlinSerialization = { id = "org.jetbrains.kotlin.plugin.serialization", version.ref = "kotlin"}
google-protobuf = { id = "com.google.protobuf", version.ref = "protobufPlugin"}

[bundles]
local = ["room-runtime", "room-ktx", "room-rxjava2", "room-rxjava3", "room-guava", "room-paging" ]


================================================
FILE: gradle/wrapper/gradle-wrapper.properties
================================================
#Tue Aug 12 18:03:38 BOT 2025
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.13-bin.zip
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists


